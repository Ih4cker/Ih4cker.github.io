<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>使用谷歌reCAPTCHA的v2和v3对网站应用进行“图像验证码/行为评分”反爬</title>
      <link href="2020/12/31/%E4%BD%BF%E7%94%A8%E8%B0%B7%E6%AD%8CreCAPTCHA%E7%9A%84v2%E5%92%8Cv3%E5%AF%B9%E7%BD%91%E7%AB%99%E5%BA%94%E7%94%A8%E8%BF%9B%E8%A1%8C%E2%80%9C%E5%9B%BE%E5%83%8F%E9%AA%8C%E8%AF%81%E7%A0%81-%E8%A1%8C%E4%B8%BA%E8%AF%84%E5%88%86%E2%80%9D%E5%8F%8D%E7%88%AC/"/>
      <url>2020/12/31/%E4%BD%BF%E7%94%A8%E8%B0%B7%E6%AD%8CreCAPTCHA%E7%9A%84v2%E5%92%8Cv3%E5%AF%B9%E7%BD%91%E7%AB%99%E5%BA%94%E7%94%A8%E8%BF%9B%E8%A1%8C%E2%80%9C%E5%9B%BE%E5%83%8F%E9%AA%8C%E8%AF%81%E7%A0%81-%E8%A1%8C%E4%B8%BA%E8%AF%84%E5%88%86%E2%80%9D%E5%8F%8D%E7%88%AC/</url>
      
        <content type="html"><![CDATA[<h2 id="0-了解谷歌reCAPTCHA"><a href="#0-了解谷歌reCAPTCHA" class="headerlink" title="0.了解谷歌reCAPTCHA"></a>0.了解谷歌reCAPTCHA</h2><p><code>reCAPTCHA</code>是谷歌推出的免费人机识别技术，使用图像验证码/用户行为评分来区别当前网站应用的用户是机器人还是正常人类。当前有<code>v2</code>版本和新的<code>v3</code>版本，当然，攻守永恒，破解<code>reCAPTCHA</code>的大有人在，<code>unCaptcha2</code>就是一个例子，相关：</p><blockquote><ul><li> <a href="https://www.google.com/recaptcha"><code>reCAPTCHA</code>官网-（需要科学上网）</a> </li><li> <a href="https://github.com/google/recaptcha"><code>reCAPTCHA</code>代码仓库-Github</a></li><li> <a href="https://recaptcha-demo.appspot.com/"><code>reCAPTCHA</code>验证流程在线demo</a></li><li> <a href="https://github.com/ecthros/uncaptcha2"><code>reCAPTCHA</code>破解库<code>unCaptcha2</code>代码仓库Github</a></li></ul></blockquote><p>  作为谷歌强推的一款人机识别利器，<code>reCAPTCHA v2</code>使用图像/语音识别技术来区分人类和机器;<code>reCAPTCHA v3</code>则通过分析网站应用的大量用户流量进而使用其机器学习技术来识别用户行为并为其打分，分值范围<code>0.0~1.0</code>,得分越低的越表明当前用户是机器人。</p> <a id="more"></a><blockquote><p>假设我们的网站应用是属于<code>登录/注册</code>后进而后续操作的类型，那么防止用户滥注册或机器人登录破坏网站应用生态尤为重要，反爬/<code>anti-robot</code>迫在眉睫.而第一关卡就是阻止机器人/恶意注册程序进入我们网站应用的数据空间，将其拒之门外或者诱敌深入（爬虫蜜罐）。谷歌<code>reCAPTCHA</code>或许可以帮助我们实现基础的第一步：拒机器人/恶意程序于门外。</p></blockquote><blockquote><p>以下简称恶意程序或机器人为<code>攻击者</code>.</p></blockquote><h2 id="1-验证码-CAPTCHA"><a href="#1-验证码-CAPTCHA" class="headerlink" title="1.验证码(CAPTCHA)"></a>1.验证码(CAPTCHA)</h2><p>一分为二地看，我们的网站应用被恶意爬取或机器人造访，必是有可图之物，比如某个功能强大的<code>路由</code>（页面工具），对于攻击者的意图有针对性的进行防护是基础反爬意识；其次，基于“料敌从宽 御敌从严”的理念，我们有必要预设攻击者的<code>攻击模型</code>，即攻击者可能使用的突破反爬的技术手段，进而采取对应的反爬措施。</p><p>对于我们的网站应用，有价值的工具或者页面操作需要在<code>注册/登录</code>后才能进一步访问，因而阻止攻击者高频次的注册/登录是首要矛盾。注册/登录验证码可以有效过滤掉一波攻击者。市面上的验证码一般有：</p><blockquote><p><img src="https://i.loli.net/2020/12/31/gxZmWRDUs37q4Mp.gif" alt="识别颠倒文字"><br><img src="https://i.loli.net/2020/12/31/i8GdcVe3EDJRUQZ.jpg" width="250" height="200" align="left"><br><img src="https://i.loli.net/2020/12/31/Hz7dRXAJgxOhCf6.png" width="250" height="200" align="left"><br><img src="https://i.loli.net/2020/12/31/xITmp7LwRBXbNka.jpg" width="250" height="200" align="left"><br><img src="https://i.loli.net/2020/12/31/k7jvn9qfwJrSclg.gif" width="250" height="200" align="left"><br><img src="https://i.loli.net/2020/12/31/sXoKjOTaruCcy9B.gif" width="250" height="200" align="left"><br><img src="https://i.loli.net/2020/12/31/eGR18Xk7Yud6ftV.png" width="250" height="200" align="left"><br><img src="https://i.loli.net/2020/12/31/QUrTfYz5NC8OkSB.gif" width="250" height="200" align="left"><img src="https://i.loli.net/2020/12/31/ltevmJFSGxfAaWu.gif" width="250" height="200" align="center"></p></blockquote><p>以上种种验证码只是当前验证码市场的一小部分，针对图像验证码，可以根据机器学习技术对大量的训练集进行学习，进一步达到破解的目的，亦或是接入人工打码平台，而对于简单的字符数字识别验证码，则有对应的成熟的第三方库可以轻易破解，网站应用加入验证码的目的只是提高或者延长攻击者的破解周期和成本代价而已。</p><h2 id="2-Why-reCAPTCHA"><a href="#2-Why-reCAPTCHA" class="headerlink" title="2.Why reCAPTCHA?"></a>2.Why reCAPTCHA?</h2><p>谷歌<code>reCAPTCHA</code>两个版本的数据流均是前端点击识别/用户环境生成关键参数<code>g-recaptcha-response</code>对服务端进行验证查询,类似如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;g-recaptcha-response&quot;</span>: <span class="string">&quot;03AGdBq27snbv3yi57Y7mbBf2BY8JKo-KJdzgYtt4A5td07JoOMdPcYjVHGxRl5XR-twUQxlcURIUoYW8d0roXwm4qA0r5WxNFBzIr4Wu4hyNzodl0Mvn-jgd0qvu2YGWXY5X8UfTC67-sI2hkbwdy7K3giaHesVlhJQVg4vdfxvxBY-DfRwgATj77PrhPF_3XX43FCI29n8nYVk97JAFKFSH2lIlWQDBH6xCkk9x3MKHW7eTLxUOYd_S0Hj4Tz9C3gM7OmkG0oWKIM40cn112FsQ3QsvUYMlIneOhTr8GGXnsiGOM2iyFL8p1OtwIMrad5RjThYPRwitQjyFIRtEGgDceBobowaH46cv5aG34XUjsRd8Z6hjK3z1uN4mQJLfn7cFHfI1Z6GFyTjxRGIsFDZOOJBktCb9aBHlNKqui3m3xdGbVjF1-etN_xlo6i4VbzPPc4CBsfI956xrCYfEOdMU0cLGhzzHoAg&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>此值<code>唯一且无法重复使用</code>，通过用户环境生成，可以作为注册登录携带的必要参数，服务端通过<code>私钥</code>与谷歌通信查询验证此值有效性从而达到识别人机的作用。</p><h2 id="3-使用前准备"><a href="#3-使用前准备" class="headerlink" title="3.使用前准备"></a>3.使用前准备</h2><h3 id="3-1-注册recaptcha密钥对"><a href="#3-1-注册recaptcha密钥对" class="headerlink" title="3.1 注册recaptcha密钥对"></a>3.1 注册recaptcha密钥对</h3><p>登录<a href="https://www.google.com/recaptcha/admin/create">Google reCAPTCHA（需科学上网）</a>管理界面，点击创建recaptcha密钥对：<br><img src="https://i.loli.net/2021/01/01/VzW6crYxgO3HmyZ.png" alt="Snipaste_2020-12-31_21-15-18.png"></p><h3 id="3-2-保存密钥对"><a href="#3-2-保存密钥对" class="headerlink" title="3.2 保存密钥对"></a>3.2 保存密钥对</h3><p><img src="https://i.loli.net/2021/01/01/m9HfET1ivraO8GN.png" alt="Snipaste_2020-12-30_19-12-35.png"></p><p>第一个密钥为内嵌在网站应用上的<code>site_key</code>,第二个为服务端与Google通信用的密钥<code>secret_key</code>，不能外泄。</p><h2 id="4-接入reCAPTCHA"><a href="#4-接入reCAPTCHA" class="headerlink" title="4.接入reCAPTCHA"></a>4.接入reCAPTCHA</h2><p>本文使用<code>flask</code>作为后台服务框架，demo环境：</p><blockquote><ul><li>python3.7</li><li>win10 64位</li><li>requests</li></ul></blockquote><p>文件结构：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">recaptcha-demo</span><br><span class="line">├── README.md</span><br><span class="line">├── index.py #脚本服务器入口</span><br><span class="line">├── config.py # 密钥对配置文件</span><br><span class="line">├── gunicorn.conf.py # gunicorn运行配置脚本，适用于Linux环境</span><br><span class="line">├── templates</span><br><span class="line">│   ├── recaptcha-v2-checkbox.html # v2版本复选框模式</span><br><span class="line">│   ├── recaptcha-v2-checkbox-explicit-rendering.html #v2版本多部件渲染</span><br><span class="line">│   ├── recaptcha-v2-invisible.html #v2版本隐藏模式 </span><br><span class="line">│   ├── recaptcha-v2-invisible-explicit-rendering.html #v2版本隐藏onload回调模式</span><br><span class="line">│   ├── recaptcha-v2-invisible-invoke.html #v2版本隐藏主动调用模式</span><br><span class="line">│   ├── recaptcha-v3.html #v3版本默认模式</span><br><span class="line">│   └── recaptcha-v3-programmatically.html #v3版本程序显式调用模式</span><br><span class="line">└── run.sh # Linux环境下快速启动脚本</span><br></pre></td></tr></table></figure><p>密钥对配置：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Ddict</span>(<span class="params"><span class="built_in">dict</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__getattr__</span>(<span class="params">self, item</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.get(item)</span><br><span class="line"></span><br><span class="line"><span class="comment"># recaptcha 版本对应的模式及密钥对</span></span><br><span class="line">Keys = Ddict(&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># reCAPTCHA v2版本</span></span><br><span class="line">    <span class="string">&#x27;V2&#x27;</span>:Ddict(&#123;</span><br><span class="line">        <span class="comment"># 域名标识键,去除英文点“.”,比如域名：recaptcha.1991.site 可以写为：recaptcha1991site</span></span><br><span class="line">        <span class="string">&#x27;localhost&#x27;</span>:Ddict(&#123;</span><br><span class="line">            <span class="comment"># 复选框模式checkbox</span></span><br><span class="line">            <span class="string">&#x27;checkbox&#x27;</span>:Ddict(&#123;</span><br><span class="line">                <span class="string">&#x27;site_key&#x27;</span>:<span class="string">&#x27;xxxxx&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;secret_key&#x27;</span>:<span class="string">&#x27;xxxxx&#x27;</span>,</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="comment"># 后台隐藏模式invisible</span></span><br><span class="line">            <span class="string">&#x27;invisible&#x27;</span>:Ddict(&#123;</span><br><span class="line">                <span class="string">&#x27;site_key&#x27;</span>:<span class="string">&#x27;xxxxx&#x27;</span>,</span><br><span class="line">                <span class="string">&#x27;secret_key&#x27;</span>:<span class="string">&#x27;xxxxx&#x27;</span>,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;),</span><br><span class="line">    <span class="comment"># reCAPTCHA v3版本</span></span><br><span class="line">    <span class="string">&#x27;V3&#x27;</span>:Ddict(&#123;</span><br><span class="line">        <span class="comment"># 域名标识键,去除英文点“.”,比如域名：recaptcha.1991.site 可以写为：recaptcha1991site</span></span><br><span class="line">        <span class="string">&#x27;localhost&#x27;</span>:Ddict(&#123;</span><br><span class="line">            <span class="string">&#x27;site_key&#x27;</span>:<span class="string">&#x27;xxxxx&#x27;</span>,</span><br><span class="line">            <span class="string">&#x27;secret_key&#x27;</span>:<span class="string">&#x27;xxxxx&#x27;</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="4-1-recaptcha-v2"><a href="#4-1-recaptcha-v2" class="headerlink" title="4.1 recaptcha v2"></a>4.1 recaptcha v2</h3><blockquote><p>复选框checkbox 模式</p></blockquote><p>前端页面<code>recaptcha-v2-checkbox.html</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;font-size:14px;&quot;</span>&gt;</span><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>reCAPTCHA v2 测试<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://www.recaptcha.net/recaptcha/api.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="function"><span class="keyword">function</span> <span class="title">onSubmit</span>(<span class="params">token</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">       <span class="comment">//回调处理</span></span></span><br><span class="line">       alert(token);</span><br><span class="line">   &#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/v2/verify/checkbox&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">id</span>=<span class="string">&quot;demo-form&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名，随便输入&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;version&quot;</span>  <span class="attr">value</span>=<span class="string">&quot;V2&quot;</span> <span class="attr">hidden</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;g-recaptcha&quot;</span> <span class="attr">data-sitekey</span>=<span class="string">&quot;&#123;&#123; site_key &#125;&#125;&quot;</span> <span class="attr">data-action</span>=<span class="string">&#x27;login&#x27;</span> <span class="attr">data-callback</span>=<span class="string">&quot;onSubmit&quot;</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;btn btn-primary&quot;</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span>  &gt;</span>Login<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure><p>后端路由及验证函数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/v2/checkbox&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recaptcha_v2_checkbox</span>():</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;recaptcha-v2-checkbox.html&#x27;</span>,site_key=Keys.V2.localhost.checkbox.site_key)</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line"><span class="comment"># ---- 验证路由 ----</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/v2/verify/checkbox&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@verify_recaptcha(<span class="params">Keys.V2.localhost.checkbox.secret_key</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">v2_verrify_checkbox</span>():</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span>:request.form,</span><br><span class="line">        <span class="string">&#x27;verify&#x27;</span>:request.verify_response</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> jsonify(data)</span><br></pre></td></tr></table></figure><p>其中装饰器<code>verify_recaptcha</code>是两个版本统一与Google recaptcha通信验证的函数:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">verify_recaptcha</span>(<span class="params">SECRET_KEY</span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">outter</span>(<span class="params">f</span>):</span></span><br><span class="line"><span class="meta">        @functools.wraps(<span class="params">f</span>)</span></span><br><span class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span>(<span class="params">*args,**kwargs</span>):</span></span><br><span class="line">            request.verify_response = &#123;&#125;</span><br><span class="line">            request.recaptcha_passed = <span class="literal">False</span></span><br><span class="line">            token = request.form.get(<span class="string">&#x27;g-recaptcha-response&#x27;</span>)</span><br><span class="line">            api = <span class="string">&#x27;https://www.recaptcha.net/recaptcha/api/siteverify&#x27;</span></span><br><span class="line">            data = &#123;</span><br><span class="line">                <span class="string">&#x27;response&#x27;</span>: token,</span><br><span class="line">                <span class="string">&#x27;secret&#x27;</span>: SECRET_KEY,</span><br><span class="line">                <span class="string">&#x27;remoteip&#x27;</span>: request.remote_addr</span><br><span class="line">            &#125;</span><br><span class="line">            response = requests.post(api, data=data)</span><br><span class="line">            result = response.json()</span><br><span class="line">            <span class="keyword">if</span> result.get(<span class="string">&#x27;success&#x27;</span>):</span><br><span class="line">                request.verify_response = result</span><br><span class="line">                request.recaptcha_passed = <span class="literal">True</span></span><br><span class="line">                <span class="keyword">return</span> f(*args,**kwargs)</span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                <span class="keyword">return</span> result,<span class="number">403</span></span><br><span class="line">        <span class="keyword">return</span> wrapper</span><br><span class="line">    <span class="keyword">return</span> outter</span><br></pre></td></tr></table></figure><p>验证通过后返回数据示例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;g-recaptcha-response&quot;</span>: <span class="string">&quot;03AGdBq24IwuxxSrI66F_n0AQ6zrthAjVt7cGzvQ4JlfbptQVY8MybRxN_LlGbNxLyOa-9lOHp8iVquam9qBzf_BiwB_yBJcXvRIWlFjBcSUyozz7Sq-NLL53aOTsp4CeWbv_PWUKTTIQ3YRQH10xRCGoHUrU2nSdTb_x-my2HYjnXMJrHwbHXnzONWgLl4IwzoxJBv_S0s8iaqJGSj-7jPKDKw6MHBxIMAfMpJn46Uh2q_2yxax5Vox3DXt_F32WJIWrmhCmnx0xQtEZvVVSTaJxkzYJWEvuR_Nvt2JKrV2AfDFlkbc7idx90P6t8isyVsMDxEOBYZogzzGaWteaaU4FW015MVVBkxctbMkch0LP3_UZv70OC9_kpafEKNDT_1HUCT_EW48vEzWpBBDCbe4cMhJJx0-Ho_mrRWlL2LsdCJqXLGLQ-2IRFiBlTG6TWPCaaL72iDXLdpEjVo94eA87GPdx2ia32AxPnphPhWr_eSZvePD3DUbY&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;V2&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;verify&quot;</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;challenge_ts&quot;</span>: <span class="string">&quot;2021-01-01T05:33:58Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hostname&quot;</span>: <span class="string">&quot;recaptcha.1991.site&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;success&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>验证失败返回示例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;error-codes&quot;</span>: </span><br><span class="line">  [</span><br><span class="line">    <span class="string">&quot;missing-input-response&quot;</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">&quot;success&quot;</span>: <span class="literal">false</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>其中，<code>success</code>字段为<code>true</code>则表明验证通过，为<code>false</code>则表明验证失败。</p><p>对于我们想要使用<code>recaptcha v2</code>进行防护的任意路由，在其页面引入v2版本的html元素后，我们在服务端可以直接安上装饰器<code>verify_recaptcha</code>,例如对登录路由进行保护:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/login&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@verify_recaptcha(<span class="params">Keys.V2.localhost.checkbox.secret_key</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">login</span>():</span></span><br><span class="line">  <span class="keyword">if</span> request.recaptcha_passed:</span><br><span class="line">  <span class="comment"># 进行登录操作</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">  <span class="comment">#验证不通过操作</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>在线测试demo: 点击==&gt;<a href="http://recaptcha.1991.site:8888/v2/checkbox">recaptcha.1991.site</a></strong></p><h3 id="4-2-recaptcha-v3"><a href="#4-2-recaptcha-v3" class="headerlink" title="4.2 recaptcha v3"></a>4.2 recaptcha v3</h3><blockquote><p>默认自动绑定渲染模式</p></blockquote><p>前端页面<code>recaptcha-v3.html</code>：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>reCAPTCHA v3 <span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://www.recaptcha.net/recaptcha/api.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>reCAPTCHA v3 测试<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">   <span class="function"><span class="keyword">function</span> <span class="title">onSubmit</span>(<span class="params">token</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">       <span class="comment">//回调处理</span></span></span><br><span class="line"><span class="javascript">       <span class="built_in">console</span>.log(token);</span></span><br><span class="line"><span class="javascript">     <span class="built_in">document</span>.getElementById(<span class="string">&quot;demo-form&quot;</span>).submit();</span></span><br><span class="line">   &#125;</span><br><span class="line"> <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/v3/verify&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span> <span class="attr">id</span>=<span class="string">&quot;demo-form&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;用户名，随便输入&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">name</span>=<span class="string">&quot;version&quot;</span> <span class="attr">value</span>=<span class="string">&quot;V3&quot;</span> <span class="attr">hidden</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">&quot;g-recaptcha&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-sitekey</span>=<span class="string">&quot;&#123;&#123; site_key &#125;&#125;&quot;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-callback</span>=<span class="string">&#x27;onSubmit&#x27;</span></span></span><br><span class="line"><span class="tag">        <span class="attr">data-action</span>=<span class="string">&#x27;login&#x27;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>后端路由及验证函数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --- html模板路由 ---</span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/v3&#x27;</span></span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recaptcha_v3</span>():</span></span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">&#x27;recaptcha-v3.html&#x27;</span>,site_key=Keys.V3.localhost.site_key)</span><br><span class="line">    </span><br><span class="line"><span class="comment"># ---- 验证路由 ----    </span></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/v3/verify&#x27;</span>,methods=[<span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="meta">@verify_recaptcha(<span class="params">Keys.V3.localhost.secret_key</span>)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">v3_verrify</span>():</span></span><br><span class="line">    data = &#123;</span><br><span class="line">        <span class="string">&#x27;data&#x27;</span>:request.form,</span><br><span class="line">        <span class="string">&#x27;verify&#x27;</span>:request.verify_response,</span><br><span class="line">        <span class="string">&#x27;score&#x27;</span>:request.verify_response.get(<span class="string">&#x27;score&#x27;</span>) <span class="keyword">if</span> request.recaptcha_passed <span class="keyword">else</span> <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> jsonify(data)</span><br></pre></td></tr></table></figure><p>验证通过后返回数据示例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;g-recaptcha-response&quot;</span>: <span class="string">&quot;03AGdBq24idxSv7r61KK7TAkApl1qRkq_1B7sdqQqYuqASa9A-skQG6Oc7VFn74JkcVPQSgv3gAUmLfKe8iZQTVjadxrW5er-KnJ1lv4db9mHV1KIElLQo-mK_bpwx8CLV5WX04HhgBCXdaosWSftRK9gm6X7LowaVCAlAJy_DzSERK38Bqeepk01_z-joVGf9Rx0j_kJiBeUGyhOJXr0C5N1w2S62ESTtIqDbMjR1KxfOTM7uObOIB9dXeVyfDJzyKqz0qc2VtRlZ-JUAe2yJfwwISWUSfZeavqqSOLTkRb3xjbeOgYMDpQZIvzwuga8Jf0FOMljUCNj_EhpYO72WGANOud5RgSgHdgDJNNuEZng4X9FKdBn9whtV5cyw-0KktmSica8-CJBC6qnTtJhdgdjzVzOHj4YkyXpbe1nfEQxrylzAf_J1v3aARcXO_W8A2EPLwXbH68Jq&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;test&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;version&quot;</span>: <span class="string">&quot;V3&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;score&quot;</span>: <span class="number">0.9</span>,</span><br><span class="line">  <span class="attr">&quot;verify&quot;</span>: </span><br><span class="line">  &#123;</span><br><span class="line">    <span class="attr">&quot;action&quot;</span>: <span class="string">&quot;login&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;challenge_ts&quot;</span>: <span class="string">&quot;2021-01-01T06:28:26Z&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;hostname&quot;</span>: <span class="string">&quot;recaptcha.1991.site&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;score&quot;</span>: <span class="number">0.9</span>,</span><br><span class="line">    <span class="attr">&quot;success&quot;</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>v3版本的体验比v2版本的更加顺畅，因为其依赖的是评分机制，越接近<code>0.0</code>分则越表明当前用户是机器人从而可以给服务端进行对应处理。但是前提是当前网站的流量必须积累一段时间评分才会愈加精确，有更多的用户流量行为数据进行训练才会更加完善。<strong>如果担心用户隐私的问题，建议慎重选择</strong></p><p><strong>在线测试demo: 点击==&gt;<a href="http://recaptcha.1991.site:8888/v3">recaptcha.1991.site</a></strong></p><p><code>v2\v3</code>其他模式的完整代码示例可见<code>GitHub</code>仓库:<a href="https://github.com/01ly/recaptcha-flask-demo">recaptcha-flask-demo</a></p><h2 id="5-后台流量查看"><a href="#5-后台流量查看" class="headerlink" title="5.后台流量查看"></a>5.后台流量查看</h2><p>登录<code>Google reCAPTCHA admin</code><a href="https://www.google.com/recaptcha/admin">后台面板</a>可查看最近网站应用<code>recaptcha</code>的流量情况:<br><img src="https://i.loli.net/2021/01/01/IRUtEDMThqa5KQY.png" alt="Snipaste_2020-12-31_21-15-50.png"></p>]]></content>
      
      
      <categories>
          
          <category> 反爬 </category>
          
          <category> python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> recaptcha </tag>
            
            <tag> 反爬 </tag>
            
            <tag> 验证码 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>得物PC微信小程序接口解析</title>
      <link href="2020/11/23/%E5%BE%97%E7%89%A9PC%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E8%A7%A3%E6%9E%90/"/>
      <url>2020/11/23/%E5%BE%97%E7%89%A9PC%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E5%8F%A3%E8%A7%A3%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="抓包"><a href="#抓包" class="headerlink" title="抓包"></a>抓包</h2><ul><li>Fiddler </li><li>windows 10 64bit</li></ul><h2 id="页面对应接口"><a href="#页面对应接口" class="headerlink" title="页面对应接口"></a>页面对应接口</h2><h3 id="1-商品详情"><a href="#1-商品详情" class="headerlink" title="1.商品详情"></a>1.商品详情</h3><a id="more"></a> <p>页面截图：<br><img src="https://i.loli.net/2020/11/23/kuWIPSqcBJQpgih.png" alt="S.png"><br>抓包截图：<br><img src="https://i.loli.net/2020/11/23/veyUdXYMkDp2Nax.png" alt="Snipaste_2020-11-23_12-56-40.png"></p><p>对应的接口为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POST https://app.dewu.com/api/v1/h5/index/fire/flow/product/detail</span><br></pre></td></tr></table></figure><p>请求头部：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Host: app.dewu.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36 MicroMessenger/7.0.9.501 NetType/WIFI MiniProgramEnv/Windows WindowsWechat</span><br><span class="line">content-type: application/json</span><br></pre></td></tr></table></figure><p>请求参数(json格式)：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;sign&quot;</span>:<span class="string">&quot;1d644c6054385b41fa4e1c376a3a485c&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;spuId&quot;</span>:<span class="string">&quot;62352&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;productSourceName&quot;</span>:<span class="string">&quot;&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;propertyValueId&quot;</span>:<span class="string">&quot;0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>可见其中的sign为加密参数，利用上一篇《**<a href="https://www.1991.site/2020/11/20/%E5%8F%8D%E7%BC%96%E8%AF%91PC%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/">反编译PC微信小程序</a>**》的小记,可拿到加密代码，翻译为python为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> hashlib,re</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sign</span>(<span class="params">jsonObj:<span class="built_in">dict</span>,trim=<span class="literal">True</span></span>)-&gt;str:</span></span><br><span class="line">    keys = jsonObj.keys()</span><br><span class="line">    sorted_obj = &#123;i:jsonObj[i] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">sorted</span>(keys)&#125;</span><br><span class="line">    _str = <span class="string">&#x27;&#x27;</span>.join([<span class="string">f&#x27;<span class="subst">&#123;k&#125;</span><span class="subst">&#123;<span class="string">&quot;&quot;</span> <span class="keyword">if</span> <span class="keyword">not</span> v <span class="keyword">and</span> <span class="built_in">isinstance</span>(v,<span class="built_in">list</span>) <span class="keyword">else</span> <span class="built_in">str</span>(v).replace(<span class="string">&quot; &quot;</span>,<span class="string">&quot;&quot;</span>)&#125;</span>&#x27;</span> <span class="keyword">for</span> k,v <span class="keyword">in</span> sorted_obj.items()])+<span class="string">&#x27;048a9c4943398714b356a696503d2d36&#x27;</span></span><br><span class="line">    _str=_str.replace(<span class="string">&quot;&#x27;&quot;</span>,<span class="string">&#x27;&quot;&#x27;</span>)</span><br><span class="line">    <span class="keyword">if</span> trim:</span><br><span class="line">        _str=re.sub(<span class="string">&#x27;[\[\]]&#x27;</span>,_str,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    md5 = hashlib.md5()</span><br><span class="line">    md5.update(<span class="built_in">bytes</span>(_str,<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="keyword">return</span> md5.hexdigest()</span><br></pre></td></tr></table></figure><p>伪造请求：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">api = <span class="string">&#x27;https://app.dewu.com/api/v1/h5/index/fire/flow/product/detail&#x27;</span></span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&quot;spuId&quot;</span>: <span class="string">&quot;62352&quot;</span>,</span><br><span class="line">    <span class="string">&quot;productSourceName&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">    <span class="string">&quot;propertyValueId&quot;</span>: <span class="string">&quot;0&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">data.update(&#123;</span><br><span class="line">    <span class="string">&#x27;sign&#x27;</span>: sign(data)</span><br><span class="line">&#125;)</span><br><span class="line">headedrs = &#123;</span><br><span class="line">    <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;app.dewu.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36 MicroMessenger/7.0.9.501 NetType/WIFI MiniProgramEnv/Windows WindowsWechat&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Wxapp-Login-Token&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">response = requests.post(api, json=data, headers=headedrs)</span><br><span class="line">print(response.json())</span><br></pre></td></tr></table></figure><p>返回结果：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    &quot;data&quot;:&#123;</span><br><span class="line">        &quot;detail&quot;:&#123;</span><br><span class="line">            &quot;spuId&quot;:62352,</span><br><span class="line">            &quot;isSelf&quot;:0,</span><br><span class="line">            &quot;categoryId&quot;:17,</span><br><span class="line">            &quot;level1CategoryId&quot;:2,</span><br><span class="line">            &quot;level2CategoryId&quot;:3,</span><br><span class="line">            &quot;brandId&quot;:10202,</span><br><span class="line">            &quot;preSellStatus&quot;:1,</span><br><span class="line">            &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FnODG0K1bdTnBSo2sxpKGXBj5a0B&quot;,</span><br><span class="line">            &quot;title&quot;:&quot;GENANX 简约宽松不规则下摆风衣外套 男款  黑色&quot;,</span><br><span class="line">            &quot;subTitle&quot;:&quot;&quot;,</span><br><span class="line">            &quot;desc&quot;:&quot;&quot;,</span><br><span class="line">            &quot;authPrice&quot;:1278,</span><br><span class="line">            &quot;sellDate&quot;:&quot;2018秋季&quot;,</span><br><span class="line">            &quot;sourceName&quot;:&quot;&quot;,</span><br><span class="line">            &quot;articleNumber&quot;:&quot;F228黑色&quot;,</span><br><span class="line">            &quot;preSellDeliverTime&quot;:1296000,</span><br><span class="line">            &quot;preSellLimitPurchase&quot;:0,</span><br><span class="line">            &quot;isShowPreSellTag&quot;:0,</span><br><span class="line">            &quot;isPreSellNew&quot;:0,</span><br><span class="line">            &quot;isShow&quot;:1,</span><br><span class="line">            &quot;crossStatus&quot;:0,</span><br><span class="line">            &quot;isShowCrossTag&quot;:0,</span><br><span class="line">            &quot;fitId&quot;:2,</span><br><span class="line">            &quot;goodsType&quot;:1,</span><br><span class="line">            &quot;deliverTime&quot;:129600,</span><br><span class="line">            &quot;isSupportDeposit&quot;:0,</span><br><span class="line">            &quot;status&quot;:1,</span><br><span class="line">            &quot;isDel&quot;:0,</span><br><span class="line">            &quot;sellStatus&quot;:1,</span><br><span class="line">            &quot;bizType&quot;:0,</span><br><span class="line">            &quot;storageStatus&quot;:1,</span><br><span class="line">            &quot;consignStatus&quot;:1</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;image&quot;:&#123;</span><br><span class="line">            &quot;spuImage&quot;:&#123;</span><br><span class="line">                &quot;images&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;propertyValueId&quot;:0,</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FnODG0K1bdTnBSo2sxpKGXBj5a0B&quot;,</span><br><span class="line">                        &quot;imgType&quot;:0</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;propertyValueId&quot;:0,</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FimtjPu4cdEwwQPv6bVGYjTYBJD1&quot;,</span><br><span class="line">                        &quot;imgType&quot;:0</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                &quot;supportPanorama&quot;:1</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;imageLayoutType&quot;:1</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;baseProperties&quot;:&#123;</span><br><span class="line">            &quot;brandList&quot;:[</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;brandId&quot;:10202,</span><br><span class="line">                    &quot;brandName&quot;:&quot;GENANX&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            &quot;list&quot;:[</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;主货号&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;F228黑色&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;发售价格&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;¥1278(仅供参考)&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;发售日期&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;2018秋季&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;袖长&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;长袖&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;版型&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;标准&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;领型&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;翻领&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;衣长&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;中长款&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;key&quot;:&quot;配色&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;黑色&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;saleProperties&quot;:&#123;</span><br><span class="line">            &quot;list&quot;:[</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;propertyId&quot;:4036,</span><br><span class="line">                    &quot;name&quot;:&quot;尺码&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;M&quot;,</span><br><span class="line">                    &quot;propertyValueId&quot;:507205,</span><br><span class="line">                    &quot;level&quot;:1,</span><br><span class="line">                    &quot;customValue&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;showValue&quot;:1,</span><br><span class="line">                    &quot;sort&quot;:0,</span><br><span class="line">                    &quot;definitionId&quot;:6</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;propertyId&quot;:4036,</span><br><span class="line">                    &quot;name&quot;:&quot;尺码&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;L&quot;,</span><br><span class="line">                    &quot;propertyValueId&quot;:507206,</span><br><span class="line">                    &quot;level&quot;:1,</span><br><span class="line">                    &quot;customValue&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;showValue&quot;:1,</span><br><span class="line">                    &quot;sort&quot;:1,</span><br><span class="line">                    &quot;definitionId&quot;:6</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;propertyId&quot;:4036,</span><br><span class="line">                    &quot;name&quot;:&quot;尺码&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;XL&quot;,</span><br><span class="line">                    &quot;propertyValueId&quot;:507204,</span><br><span class="line">                    &quot;level&quot;:1,</span><br><span class="line">                    &quot;customValue&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;showValue&quot;:1,</span><br><span class="line">                    &quot;sort&quot;:2,</span><br><span class="line">                    &quot;definitionId&quot;:6</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;propertyId&quot;:4036,</span><br><span class="line">                    &quot;name&quot;:&quot;尺码&quot;,</span><br><span class="line">                    &quot;value&quot;:&quot;XXL&quot;,</span><br><span class="line">                    &quot;propertyValueId&quot;:507207,</span><br><span class="line">                    &quot;level&quot;:1,</span><br><span class="line">                    &quot;customValue&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;showValue&quot;:1,</span><br><span class="line">                    &quot;sort&quot;:3,</span><br><span class="line">                    &quot;definitionId&quot;:6</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;item&quot;:&#123;</span><br><span class="line">            &quot;saleInventoryNo&quot;:&quot;SN10104335570&quot;,</span><br><span class="line">            &quot;price&quot;:63900,</span><br><span class="line">            &quot;type&quot;:1,</span><br><span class="line">            &quot;maxPrice&quot;:63900,</span><br><span class="line">            &quot;tradeType&quot;:0,</span><br><span class="line">            &quot;skuId&quot;:374106997,</span><br><span class="line">            &quot;floorPrice&quot;:63900,</span><br><span class="line">            &quot;upperPrice&quot;:0,</span><br><span class="line">            &quot;intentPrice&quot;:0,</span><br><span class="line">            &quot;activityPrice&quot;:0</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;skus&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374106980,</span><br><span class="line">                &quot;spuId&quot;:62352,</span><br><span class="line">                &quot;authPrice&quot;:127800,</span><br><span class="line">                &quot;status&quot;:1,</span><br><span class="line">                &quot;properties&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;level&quot;:1,</span><br><span class="line">                        &quot;propertyValueId&quot;:507206</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374106997,</span><br><span class="line">                &quot;spuId&quot;:62352,</span><br><span class="line">                &quot;authPrice&quot;:127800,</span><br><span class="line">                &quot;status&quot;:1,</span><br><span class="line">                &quot;properties&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;level&quot;:1,</span><br><span class="line">                        &quot;propertyValueId&quot;:507205</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374107361,</span><br><span class="line">                &quot;spuId&quot;:62352,</span><br><span class="line">                &quot;authPrice&quot;:127800,</span><br><span class="line">                &quot;status&quot;:1,</span><br><span class="line">                &quot;properties&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;level&quot;:1,</span><br><span class="line">                        &quot;propertyValueId&quot;:507204</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374107379,</span><br><span class="line">                &quot;spuId&quot;:62352,</span><br><span class="line">                &quot;authPrice&quot;:127800,</span><br><span class="line">                &quot;status&quot;:1,</span><br><span class="line">                &quot;properties&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;level&quot;:1,</span><br><span class="line">                        &quot;propertyValueId&quot;:507207</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;relationList&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:60305,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;Fk5JipsEc4ElPDvQDfCYvShQw2E2&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 长款背面印花宽松风衣外套 男女同款  黑色&quot;,</span><br><span class="line">                &quot;price&quot;:59900,</span><br><span class="line">                &quot;soldNum&quot;:26,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:69175,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FjXcudP4bBlnz5laiz-OP3tGJv5K&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 印花落肩袖拼接翻领风衣外套 男女同款  黑色&quot;,</span><br><span class="line">                &quot;price&quot;:66900,</span><br><span class="line">                &quot;soldNum&quot;:49,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:57363,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FiFx1NyZDzh5K9D2Wt4OVPRYSwSL&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 撞色拼接Oversize绣标连帽风衣外套  男女同款 黑灰色&quot;,</span><br><span class="line">                &quot;price&quot;:69900,</span><br><span class="line">                &quot;soldNum&quot;:16,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:64386,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FpkWMk0tLB2GWsbHngBKpT0THq5Z&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 撞色不规则下摆宽松中长款风衣外套 男款 黑色&quot;,</span><br><span class="line">                &quot;price&quot;:56900,</span><br><span class="line">                &quot;soldNum&quot;:31,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:67268,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FtyAEdYVogj6WAhj8vJ8YlZSo8ha&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 落肩长款宽松翻领风衣 男款  黑色&quot;,</span><br><span class="line">                &quot;price&quot;:66900,</span><br><span class="line">                &quot;soldNum&quot;:56,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:1140208,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;RjMxNSUyMCgxKTE2MDAzMzE5Mzc5MDY&#x3D;.jpg&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 蝙蝠型立领印花贴布特宽松长款风衣 黑色&quot;,</span><br><span class="line">                &quot;price&quot;:66900,</span><br><span class="line">                &quot;soldNum&quot;:16,</span><br><span class="line">                &quot;propertyValueId&quot;:25016553,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:1164758,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;MTUwMHg5NjAlMjAoMSkxNjAyNDY3Mzc0NjQ1.JPG&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 炫彩印花贴布长款连帽风衣 男款 黑色&quot;,</span><br><span class="line">                &quot;price&quot;:59900,</span><br><span class="line">                &quot;soldNum&quot;:4,</span><br><span class="line">                &quot;propertyValueId&quot;:25919753,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:1164746,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;MTUwMFg5NjAlMjAoMSkxNjAyNDY2OTIwNzYw.JPG&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 英文印花宽松翻领长款风衣 男款 孔雀绿&quot;,</span><br><span class="line">                &quot;price&quot;:59900,</span><br><span class="line">                &quot;soldNum&quot;:5,</span><br><span class="line">                &quot;propertyValueId&quot;:25919372,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:49443,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FlIaJbeivrhgY8XjyG1xByr9gsT4&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 撞色叠层拼接袖印花翻领风衣 男款 黑白色&quot;,</span><br><span class="line">                &quot;price&quot;:66900,</span><br><span class="line">                &quot;soldNum&quot;:134,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:59113,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;Fkibum7Ao8V_2j44oQ7MkeoJMlR-&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 迷彩印花宽松连帽风衣外套 男款 &quot;,</span><br><span class="line">                &quot;price&quot;:56900,</span><br><span class="line">                &quot;soldNum&quot;:20,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:1164723,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;MTUwMHg5NjAlMjAoMSkxNjAyNDY1MjM2Mjkw.JPG&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 撞色拼接印花连帽风衣 男款 蓝红色&quot;,</span><br><span class="line">                &quot;price&quot;:79900,</span><br><span class="line">                &quot;soldNum&quot;:0,</span><br><span class="line">                &quot;propertyValueId&quot;:25918353,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:57362,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FvFwab_6tEjmDu6DY70-nJbG2nTS&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 印花双门襟宽松可拆连帽风衣外套 男女同款  黑色&quot;,</span><br><span class="line">                &quot;price&quot;:69900,</span><br><span class="line">                &quot;soldNum&quot;:37,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:62366,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;Fqz7dNK3pHb3daFepoJE8qSiPp7B&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 提花叠层宽松连帽风衣外套 男女同款  黑色&quot;,</span><br><span class="line">                &quot;price&quot;:69900,</span><br><span class="line">                &quot;soldNum&quot;:30,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:67254,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;temp&#x2F;FqadYZ3IOqrkQo-P4BIIy198O68v&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 织带不规则下摆宽松连帽风衣 男女同款 黑色&quot;,</span><br><span class="line">                &quot;price&quot;:66900,</span><br><span class="line">                &quot;soldNum&quot;:15,</span><br><span class="line">                &quot;propertyValueId&quot;:0,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;spuId&quot;:1123355,</span><br><span class="line">                &quot;logoUrl&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;MjE1OTkxMTgwNTcxOTI&#x3D;.jpg&quot;,</span><br><span class="line">                &quot;title&quot;:&quot;GENANX 卡通印花抽绳大口袋中长款牛仔风衣外套 黑色&quot;,</span><br><span class="line">                &quot;price&quot;:49900,</span><br><span class="line">                &quot;soldNum&quot;:22,</span><br><span class="line">                &quot;propertyValueId&quot;:24482188,</span><br><span class="line">                &quot;requestId&quot;:&quot;1330747877933371392&quot;,</span><br><span class="line">                &quot;cn&quot;:&quot;imgSim&quot;,</span><br><span class="line">                &quot;maxSalePrice&quot;:0,</span><br><span class="line">                &quot;activityPrice&quot;:0</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;lastSoldList&quot;:&#123;</span><br><span class="line">            &quot;count&quot;:68,</span><br><span class="line">            &quot;list&quot;:[</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;avatar&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;du_app&#x2F;2020&#x2F;image&#x2F;_byte105373byte_d294800a8a1726b4ec7cf845bcd713c5_iOS_w750h750.jpg?imageView2&#x2F;2&#x2F;w&#x2F;50&#x2F;h&#x2F;50&quot;,</span><br><span class="line">                    &quot;userName&quot;:&quot;H*e&quot;,</span><br><span class="line">                    &quot;formatTime&quot;:&quot;6分钟前&quot;,</span><br><span class="line">                    &quot;orderSubTypeName&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;price&quot;:63900,</span><br><span class="line">                    &quot;propertiesValues&quot;:&quot;L&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;avatar&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;du_app&#x2F;2020&#x2F;image&#x2F;165396795_modelEML-AL00model_byte137853byte_82712c94bbc49991276c004785d75b1c_du_android_w1080_h1080.png?imageView2&#x2F;2&#x2F;w&#x2F;50&#x2F;h&#x2F;50&quot;,</span><br><span class="line">                    &quot;userName&quot;:&quot;烽*王&quot;,</span><br><span class="line">                    &quot;formatTime&quot;:&quot;17小时前&quot;,</span><br><span class="line">                    &quot;orderSubTypeName&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;price&quot;:63900,</span><br><span class="line">                    &quot;propertiesValues&quot;:&quot;XXL&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;avatar&quot;:&quot;https:&#x2F;&#x2F;du.hupucdn.com&#x2F;FopKJAJnH2BCZ5M2MId0OmBVkvdp?imageView2&#x2F;2&#x2F;w&#x2F;50&#x2F;h&#x2F;50&quot;,</span><br><span class="line">                    &quot;userName&quot;:&quot;乐*i&quot;,</span><br><span class="line">                    &quot;formatTime&quot;:&quot;18小时前&quot;,</span><br><span class="line">                    &quot;orderSubTypeName&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;price&quot;:63900,</span><br><span class="line">                    &quot;propertiesValues&quot;:&quot;M&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;avatar&quot;:&quot;http:&#x2F;&#x2F;thirdwx.qlogo.cn&#x2F;mmopen&#x2F;vi_32&#x2F;DYAIOgq83eoD8W8pibnczd23qIwtgoibeo7suEdpWbIXog7GaRdhib3bpG3a8O1ULfRCpNN14eWrVKjtTIOjDZMjw&#x2F;132?imageView2&#x2F;2&#x2F;w&#x2F;50&#x2F;h&#x2F;50&quot;,</span><br><span class="line">                    &quot;userName&quot;:&quot;任*h&quot;,</span><br><span class="line">                    &quot;formatTime&quot;:&quot;1天前&quot;,</span><br><span class="line">                    &quot;orderSubTypeName&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;price&quot;:63900,</span><br><span class="line">                    &quot;propertiesValues&quot;:&quot;L&quot;</span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;avatar&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;TGFyazIwMjAwMzIwLTE4MzQ0OA&#x3D;&#x3D;.png?imageView2&#x2F;2&#x2F;w&#x2F;50&#x2F;h&#x2F;50&quot;,</span><br><span class="line">                    &quot;userName&quot;:&quot;想*m&quot;,</span><br><span class="line">                    &quot;formatTime&quot;:&quot;2天前&quot;,</span><br><span class="line">                    &quot;orderSubTypeName&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;price&quot;:63900,</span><br><span class="line">                    &quot;propertiesValues&quot;:&quot;XL&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;favoriteList&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374106980,</span><br><span class="line">                &quot;isAdded&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374106997,</span><br><span class="line">                &quot;isAdded&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374107361,</span><br><span class="line">                &quot;isAdded&quot;:0</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;skuId&quot;:374107379,</span><br><span class="line">                &quot;isAdded&quot;:0</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;imageAndText&quot;:[</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;images&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;JUU5JTg5JUI0JUU1JTg4JUFCJUU1JTkzJTgxJUU1JUFFJUEzQDN4.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1125,</span><br><span class="line">                        &quot;height&quot;:243</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                &quot;imageGap&quot;:true</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;type&quot;:&quot;text&quot;,</span><br><span class="line">                &quot;contentType&quot;:&quot;HISTORY&quot;,</span><br><span class="line">                &quot;contentName&quot;:&quot;&quot;,</span><br><span class="line">                &quot;images&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FsBsOoX_lxuiDx_Woda9Gub-StZnnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:750,</span><br><span class="line">                        &quot;height&quot;:77</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;spu-62352-history-6-439267new.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;width&quot;:1600,</span><br><span class="line">                        &quot;height&quot;:954</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FtrRcJgNCWlqZraX_8OGCA9TNz6snew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:750,</span><br><span class="line">                        &quot;height&quot;:77</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FsKC9P4zU5D5p-rCsgc1v8TqdPqBnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1500,</span><br><span class="line">                        &quot;height&quot;:960</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FoYKZmhT0HHZT_qtLHSsTNDdsNSSnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1500,</span><br><span class="line">                        &quot;height&quot;:960</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FjHK7vhmTJJJYMzVcGd6MKorWq9nnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:750,</span><br><span class="line">                        &quot;height&quot;:77</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FtnZnKJvm9ZRauQgaTnEF7isxYWknew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:785,</span><br><span class="line">                        &quot;height&quot;:991</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FnRRrRcMox3Sp7eDNbqZPeih_2Zbnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:763,</span><br><span class="line">                        &quot;height&quot;:981</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FgXkRWew3LoBFwsUwFX-un_pEoFHnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:765,</span><br><span class="line">                        &quot;height&quot;:981</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;Fivv9lNMNqjS4ucr3Ao5tKC-gXbYnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:777,</span><br><span class="line">                        &quot;height&quot;:981</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FiowUkV1c0MqTys4Qxs7UMfUbVe-new.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:789,</span><br><span class="line">                        &quot;height&quot;:989</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FhB96vNsoTbwo3c_B7BhAqONT5aYnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:775,</span><br><span class="line">                        &quot;height&quot;:985</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FoiDH12iHDVmlzmYIrYBV_Tvk2cinew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:781,</span><br><span class="line">                        &quot;height&quot;:981</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FtTQksLgNInBHNwuia39XTH1JhYenew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:787,</span><br><span class="line">                        &quot;height&quot;:981</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;FgsbYy2FtkeMs6DAkWY8r4dW3ng2new.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:750,</span><br><span class="line">                        &quot;height&quot;:77</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;Fo5tnxN-Ow-mQNQEnycepBS4NaIZnew.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1125,</span><br><span class="line">                        &quot;height&quot;:1165</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;du_sizechart&#x2F;Sizechart&#x2F;5ae904ff6b175023newnew.jpg?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1443,</span><br><span class="line">                        &quot;height&quot;:1824</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                &quot;imageGap&quot;:true</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;type&quot;:&quot;text&quot;,</span><br><span class="line">                &quot;contentType&quot;:&quot;SIZEREPORT&quot;,</span><br><span class="line">                &quot;contentName&quot;:&quot;试穿报告&quot;,</span><br><span class="line">                &quot;imageGap&quot;:true,</span><br><span class="line">                &quot;sizeReportModel&quot;:&#123;</span><br><span class="line">                    &quot;torTips&quot;:&quot;该数据仅供参考，请结合自身情况进行选择。&quot;,</span><br><span class="line">                    &quot;torName&quot;:&quot;&quot;,</span><br><span class="line">                    &quot;tryOnReportDetail&quot;:[</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;体重&#x2F;kg</span><br><span class="line">身高&#x2F;cm&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;≤160,165,170,175,180,185,≥190&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;≤55kg&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;M,M,M,M,M,M,M&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;60&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;M,M,M,M,M,M,L&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;65&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;M,M,M,L,L,L,L&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;70&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;M,M,L,L,L,L,XL&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;75&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;L,L,L,L,L,XL,XL&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;80&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;L,L,L,L,XL,XL,XL&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;85&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;L,XL,XL,XL,XL,XL,XXL&quot;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;sizeKey&quot;:&quot;≥90&quot;,</span><br><span class="line">                            &quot;sizeValue&quot;:&quot;XL,XL,XL,XXL,XXL,XXL,XXL&quot;</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;type&quot;:&quot;text&quot;,</span><br><span class="line">                &quot;contentType&quot;:&quot;STRUCTURE_SIZE&quot;,</span><br><span class="line">                &quot;contentName&quot;:&quot;尺码对照表&quot;,</span><br><span class="line">                &quot;imageGap&quot;:true,</span><br><span class="line">                &quot;sizeReportModel&quot;:&#123;</span><br><span class="line">                    &quot;brandLogoUrl&quot;:&quot;https:&#x2F;&#x2F;du.hupucdn.com&#x2F;news_byte9514byte_77dee80e931dfd8b528f609c400951e4_w150h150.png&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;type&quot;:&quot;text&quot;,</span><br><span class="line">                &quot;contentType&quot;:&quot;ATTENTION&quot;,</span><br><span class="line">                &quot;contentName&quot;:&quot;&quot;,</span><br><span class="line">                &quot;images&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;JUU4JUI0JUFEJUU3JTg5JUE5JUU5JUExJUJCJUU3JTlGJUE1LSVFNiU5NiVCMEAyeA&#x3D;&#x3D;.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:750,</span><br><span class="line">                        &quot;height&quot;:34</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;china-product.poizon.com&#x2F;category-2-attention-142578.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;width&quot;:1600,</span><br><span class="line">                        &quot;height&quot;:1930</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                &quot;imageGap&quot;:true</span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;images&quot;:[</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;dfd5d4f65db5e25a73a16a701d2b40b6.gif?is_compress&#x3D;0&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1125,</span><br><span class="line">                        &quot;height&quot;:573</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;url&quot;:&quot;https:&#x2F;&#x2F;cdn.poizon.com&#x2F;node-common&#x2F;73d62af425f0ce728a4b91f78af85cdd.png?x-oss-process&#x3D;image&#x2F;resize,w_1080&quot;,</span><br><span class="line">                        &quot;coverUrl&quot;:&quot;&quot;,</span><br><span class="line">                        &quot;width&quot;:1125,</span><br><span class="line">                        &quot;height&quot;:1947</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">                &quot;imageGap&quot;:true</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        &quot;instalment&quot;:&#123;</span><br><span class="line">            &quot;entryCopy&quot;:&quot;花呗分期，最低月付57.24元&quot;,</span><br><span class="line">            &quot;floatingLayerInformation&quot;:&quot;&quot;,</span><br><span class="line">            &quot;bottomInformation&quot;:&quot;实际支付金额以所选购买渠道为准。&quot;,</span><br><span class="line">            &quot;instalmentType&quot;:1,</span><br><span class="line">            &quot;isShowInstalment&quot;:0,</span><br><span class="line">            &quot;instalmentDesc&quot;:&quot;花呗分期支付&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;evaluate&quot;:&#123;</span><br><span class="line">            &quot;count&quot;:0,</span><br><span class="line">            &quot;type&quot;:0,</span><br><span class="line">            &quot;sizes&quot;:[</span><br><span class="line"></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;kfInfo&quot;:&#123;</span><br><span class="line">            &quot;isShowKf&quot;:1,</span><br><span class="line">            &quot;kfRobotId&quot;:163756,</span><br><span class="line">            &quot;kfRobotoId&quot;:163756,</span><br><span class="line">            &quot;kfGroupId&quot;:-1,</span><br><span class="line">            &quot;sourceName&quot;:&quot;related&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;advMidPriorityModel&quot;:&#123;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;branding&quot;:&#123;</span><br><span class="line">            &quot;newUser&quot;:true,</span><br><span class="line">            &quot;image&quot;:&quot;https:&#x2F;&#x2F;du.hupucdn.com&#x2F;FohmlHnM2B2oQnl7Fk7gv7wewNCe&quot;,</span><br><span class="line">            &quot;redirect&quot;:&quot;https:&#x2F;&#x2F;m.poizon.com&#x2F;nvwa&#x2F;#&#x2F;detail&#x2F;5e68b4f56bf60823cbd92eea&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;threeDLinkUrl&quot;:&quot;http:&#x2F;&#x2F;m.poizon.com&#x2F;router&#x2F;product&#x2F;ProductDetail?spuId&#x3D;62352&amp;sourceName&#x3D;shareDetail&amp;shareSource&#x3D;productDetail&quot;,</span><br><span class="line">        &quot;shareLinkUrl&quot;:&quot;http:&#x2F;&#x2F;m.poizon.com&#x2F;router&#x2F;product&#x2F;ProductDetail?spuId&#x3D;62352&amp;sourceName&#x3D;shareDetail&quot;,</span><br><span class="line">        &quot;miniShareLinkUrl&quot;:&quot;&#x2F;product&#x2F;ProductDetail?spuId&#x3D;62352&amp;sourceName&#x3D;shareDetail&quot;,</span><br><span class="line">        &quot;hasSizeTable&quot;:true,</span><br><span class="line">        &quot;rank&quot;:&#123;</span><br><span class="line">            &quot;rankId&quot;:14,</span><br><span class="line">            &quot;rankIds&quot;:[</span><br><span class="line">                14</span><br><span class="line">            ],</span><br><span class="line">            &quot;title&quot;:&quot;入选「风衣热度榜」&quot;,</span><br><span class="line">            &quot;rankType&quot;:&quot;1&quot;,</span><br><span class="line">            &quot;seq&quot;:8,</span><br><span class="line">            &quot;categoryId&quot;:17,</span><br><span class="line">            &quot;themeType&quot;:2</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;serverTime&quot;:1606109992851,</span><br><span class="line">        &quot;brandFavorite&quot;:&#123;</span><br><span class="line">            &quot;brandId&quot;:10202,</span><br><span class="line">            &quot;brandLogo&quot;:&quot;https:&#x2F;&#x2F;du.hupucdn.com&#x2F;news_byte9514byte_77dee80e931dfd8b528f609c400951e4_w150h150.png&quot;,</span><br><span class="line">            &quot;brandName&quot;:&quot;GENANX&quot;,</span><br><span class="line">            &quot;brandPostCount&quot;:28703,</span><br><span class="line">            &quot;brandOfSpuCount&quot;:1595</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;buyerRightsName&quot;:[</span><br><span class="line">            &quot;花呗分期&quot;,</span><br><span class="line">            &quot;超时赔付&quot;,</span><br><span class="line">            &quot;假一赔三&quot;,</span><br><span class="line">            &quot;防伪包装&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;isShowFq&quot;:true,</span><br><span class="line">        &quot;activityPrice&quot;:0</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;code&quot;:200,</span><br><span class="line">    &quot;status&quot;:200,</span><br><span class="line">    &quot;msg&quot;:&quot;ok&quot;,</span><br><span class="line">    &quot;error&quot;:false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> python3 </category>
          
          <category> 接口分析 </category>
          
          <category> 加密源码 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 抓包 </tag>
            
            <tag> 爬虫 </tag>
            
            <tag> 接口 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>反编译PC微信小程序</title>
      <link href="2020/11/20/%E5%8F%8D%E7%BC%96%E8%AF%91PC%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/"/>
      <url>2020/11/20/%E5%8F%8D%E7%BC%96%E8%AF%91PC%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>微信是移动社交的巨无霸，任何移动端版本的wechat，想要逆向都是很困难的。但是企鹅意欲打造的社交生态圈覆盖PC和移动端，移动端无法<br>解决的事情，可以从其他的途径找到某些眉目。小程序是新的一个突破口，微信小程序已经成为很多移动端app的流量引入平台，那么被数据采集也无可避免。</p><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><ul><li>示例微信小程序：今日最热榜</li><li>平台：Windows 10 64bit</li><li>Python 3.7  64bit</li><li>NodeJs  v12.16.1</li></ul><h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><ul><li><a href="https://github.com/leakC/wxappUnpacker-1">微信小程序包反编译工具<code>wxappUnpacker</code></a></li><li><a href="https://github.com/leakC/pc_wxapkg_decrypt_python">微信pc小程序解密脚本</a></li><li><a href="https://www.telerik.com/fiddler">抓包工具Fiddler</a></li></ul><a id="more"></a> <h2 id="0-解密小程序wxapkg包"><a href="#0-解密小程序wxapkg包" class="headerlink" title="0.解密小程序wxapkg包"></a>0.解密小程序wxapkg包</h2><p>pc端的微信小程序与移动端不同，pc端对小程序包(例如<code>__APP__.wxapkg</code>)进行了加密,加密详细请见<a href="https://blog.csdn.net/yeyiqun/article/details/109172556">此处</a>，所以我们使用微信小程序反编译工具来反编译<code>wxapkg</code>包会报错，<br>一般存放某个pc微信小程序包的路径为：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\&lt;用户名&gt;\Documents\WeChat Files\Applet\&lt;小程序的wxid&gt;\&lt;数字&gt;\&lt;小程序包名.wxapkg&gt;</span><br></pre></td></tr></table></figure><p>类似下图：<br><img src="https://i.loli.net/2020/11/20/Bqla9X83kizMfbc.png" alt="0.png"><br><img src="https://i.loli.net/2020/11/20/kx6Z8mOo42JYdeU.png" alt="1.png"></p><p>其中的<code>wx5bfb6b535af31da3</code>便是微信小程序<code>今日最热榜</code>的<code>wxid</code>,此字符串用于对小程序包的解密，需要用到。</p><blockquote><p>ps:如果发现找不到对应的wxapkg包，那么打开PC微信，并打开小程序<code>今日最热榜</code>便可以将其小程序包下载至本地，如果在一下路径中发现包太多，那么全部删除剩下<code>publicLib</code>文件夹，再打开<code>今日最热榜</code>便可以看到唯一一个小程序包文件夹。</p></blockquote><p>此时解密小程序包的条件已达成：</p><ul><li>小程序包<strong>APP</strong>.wxapkg</li><li>小程序wxid:wx5bfb6b535af31da3</li><li>安装Crypto的python3.7环境</li><li>解密python脚本</li></ul><p>解密脚本<code>decrypt.py</code>：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"><span class="keyword">from</span> Crypto.Protocol.KDF <span class="keyword">import</span> PBKDF2</span><br><span class="line"><span class="keyword">from</span> Crypto.Hash <span class="keyword">import</span> SHA1</span><br><span class="line"><span class="keyword">from</span> Crypto.Cipher <span class="keyword">import</span> AES</span><br><span class="line"></span><br><span class="line"><span class="comment"># 微信小程序包 自定义标识</span></span><br><span class="line">WXAPKG_FLAG = <span class="string">&#x27;V1MMWX&#x27;</span></span><br><span class="line">WXAPKG_FLAG_LEN = <span class="built_in">len</span>(WXAPKG_FLAG)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span>():</span></span><br><span class="line"></span><br><span class="line">    parser = argparse.ArgumentParser(description=<span class="string">&#x27;PC微信小程序wxapkg包解密工具&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--wxid&#x27;</span>, metavar=<span class="string">&#x27;微信小程序ID&#x27;</span>, required=<span class="literal">True</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--iv&#x27;</span>, metavar=<span class="string">&#x27;iv&#x27;</span>, required=<span class="literal">False</span>, default=<span class="string">&#x27;the iv: 16 bytes&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;--salt&#x27;</span>, metavar=<span class="string">&#x27;salt&#x27;</span>, required=<span class="literal">False</span>, default=<span class="string">&#x27;saltiest&#x27;</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-f&#x27;</span>, <span class="string">&#x27;--file&#x27;</span>, metavar=<span class="string">&#x27;加密的小程序包文件路径&#x27;</span>, required=<span class="literal">True</span>)</span><br><span class="line">    parser.add_argument(<span class="string">&#x27;-o&#x27;</span>, <span class="string">&#x27;--output&#x27;</span>, metavar=<span class="string">&#x27;解密后的小程序包文件路径&#x27;</span>, required=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    args = parser.parse_args()</span><br><span class="line"></span><br><span class="line">    key = PBKDF2(args.wxid.encode(<span class="string">&#x27;utf-8&#x27;</span>), args.salt.encode(<span class="string">&#x27;utf-8&#x27;</span>), <span class="number">32</span>, count=<span class="number">1000</span>, hmac_hash_module=SHA1)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 读取加密的内容</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(args.file):</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;文件不存在&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(args.file, mode=<span class="string">&#x27;rb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        dataByte = f.read()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> dataByte[<span class="number">0</span>:WXAPKG_FLAG_LEN].decode() != WXAPKG_FLAG:</span><br><span class="line">        <span class="keyword">raise</span> Exception(<span class="string">&#x27;该文件无需解密, 或者不是微信小程序wxapkg加密包&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化密钥</span></span><br><span class="line">    cipher = AES.new(key, AES.MODE_CBC, args.iv.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 解密头部1024个字节</span></span><br><span class="line">    originData = cipher.decrypt(dataByte[WXAPKG_FLAG_LEN: <span class="number">1024</span> + WXAPKG_FLAG_LEN])</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 初始化xor密钥, 解密剩余字节</span></span><br><span class="line">    xorKey = <span class="number">0x66</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(args.wxid) &gt;= <span class="number">2</span>:</span><br><span class="line">        xorKey = <span class="built_in">ord</span>(args.wxid[<span class="built_in">len</span>(args.wxid) - <span class="number">2</span>])</span><br><span class="line"></span><br><span class="line">    afData = dataByte[<span class="number">1024</span> + WXAPKG_FLAG_LEN:]</span><br><span class="line"></span><br><span class="line">    out = <span class="built_in">bytearray</span>()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(afData)):</span><br><span class="line">        out.append(afData[i] ^ xorKey)</span><br><span class="line"></span><br><span class="line">    originData = originData[<span class="number">0</span>:<span class="number">1023</span>] + out</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 保存解密后的数据</span></span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(args.output, mode=<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(originData)</span><br><span class="line"></span><br><span class="line">    print(<span class="string">&#x27;解密成功&#x27;</span>, args.output)</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>开始解密小程序包:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python decrypt.py  --wxid  &lt;小程序wxid&gt; --file &lt;小程序包&gt; -o &lt;输出解密后小程序包路径&gt;</span><br></pre></td></tr></table></figure><p>本例使用命令(小程序包<code>__APP__.wxapkg</code>与解密脚本放在同一路径下)：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python decrypt.py  --wxid  wx5bfb6b535af31da3 --file __APP__.wxapkg -o decryptedAPP.wxapkg</span><br></pre></td></tr></table></figure><p>此时成功会发现当前路径下有新包：<code>decryptedAPP.wxapkg</code>，便是解密后的小程序包</p><p>类似下图：<br><img src="https://i.loli.net/2020/11/20/DiToum1Le2jK3cV.png" alt="2.png"><br><img src="https://i.loli.net/2020/11/20/UpPVx3Fic4so6Wh.png" alt="3.png"></p><h2 id="1-反编译wxapkg包"><a href="#1-反编译wxapkg包" class="headerlink" title="1.反编译wxapkg包"></a>1.反编译wxapkg包</h2><p>获取到解密后的wxapkg，那么可以使用<code>wxappUnpacker</code>对解密后的<code>decryptedAPP.wxapkg</code>进行反编译，首先安装<code>wxappUnpacker</code>,<br><a href="https://github.com/leakC/wxappUnpacker-1">详见此处</a>,安装后将<code>decryptedAPP.wxapkg</code>放在<code>wxappUnpacker</code>文件夹下，<br>反编译命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node wuWxapkg.js &lt;解密后小程序包&gt;</span><br></pre></td></tr></table></figure><p>本例使用命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ node wuWxapkg.js decryptedAPP.wxapkg</span><br></pre></td></tr></table></figure><p>类似下图：<br><img src="https://i.loli.net/2020/11/20/JBR64omvOd8NMVZ.png" alt="5.png"><br><img src="https://i.loli.net/2020/11/20/W4MUliVfsHk2BEF.png" alt="4.png"></p><p>成功后会发现与<code>decryptedAPP.wxapkg</code>同个路径下有同名文件夹<code>decryptedAPP</code>，结构类似：<br><img src="https://i.loli.net/2020/11/20/l8NDTQi7LVX69FY.png" alt="6.png"></p><p>至此简单的反编译流程跑通。</p><h2 id="2-寻找关键加密请求字段"><a href="#2-寻找关键加密请求字段" class="headerlink" title="2.寻找关键加密请求字段"></a>2.寻找关键加密请求字段</h2><p>本例中的小程序<code>今日最热榜</code>，打开后使用<code>Fiddler</code>进行抓包分析其接口参数：<br><img src="https://i.loli.net/2020/11/20/GhMBHxtIaNsAvz1.png" alt="7.png"></p><p>下拉小程序加载新闻流，可以发现对应接口为：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://m.toutiao.com/list/wxapp/?aid=1162&amp;ac=wap&amp;tag=news_entertainment&amp;format=json_raw&amp;count=20&amp;as=A1D5CF6B579B95B&amp;cp=5FB7CBF9D56B6E1&amp;enable_stick=&amp;max_behot_time=1605876032</span><br></pre></td></tr></table></figure><p>其中请求头部：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Host: m.toutiao.com</span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/532.36 (KHTML, like Gecko) Chrome/53.0.2785.143 Safari/537.36 MicroMessenger/7.0.9.501 NetType/WIFI MiniProgramEnv/Windows WindowsWechat</span><br><span class="line">X-Traffic-Type: wxapp</span><br><span class="line">content-type: application/json</span><br><span class="line">Referer: https://servicewechat.com/wx5bfb6b535af31da3/2/page-frame.html</span><br></pre></td></tr></table></figure><p>对应参数：<br><img src="https://i.loli.net/2020/11/20/tMFaAHysXeGZ219.png" alt="8.png"><br>其中加密参数为：<code>as</code>,<code>cp</code></p><p>使用<code>WebStorm</code>打开文件夹<code>decryptedAPP</code>，全局查找关键词<code>as:</code>（注意有加英文冒号）,结果如下：<br><img src="https://i.loli.net/2020/11/20/EzvDWMVgIoq8aSR.png" alt="9.png"><br>js文件<code>ASCP.js</code>内容：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> md5 = <span class="built_in">require</span>(<span class="string">&quot;./md5.js&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ascp</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> nowTime = <span class="built_in">Math</span>.floor(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime() / <span class="number">1e3</span>);</span><br><span class="line">    <span class="keyword">var</span> t_hex = nowTime.toString(<span class="number">16</span>).toUpperCase();</span><br><span class="line">    <span class="keyword">var</span> t_md5 = md5(nowTime).toString().toUpperCase();</span><br><span class="line">    <span class="keyword">if</span> (t_hex.length !== <span class="number">8</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="keyword">as</span>: <span class="string">&quot;479BB4B7254C150&quot;</span>,</span><br><span class="line">            cp: <span class="string">&quot;7E0AC8874BB0985&quot;</span></span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> pre = t_md5.slice(<span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="keyword">var</span> last = t_md5.slice(-<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">var</span> as_cy = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">        as_cy += pre[i] + t_hex[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> cp_cy = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; <span class="number">5</span>; j++) &#123;</span><br><span class="line">        cp_cy += t_hex[j + <span class="number">3</span>] + last[j];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="keyword">as</span>: <span class="string">&quot;A1&quot;</span> + as_cy + t_hex.slice(-<span class="number">3</span>),</span><br><span class="line">        cp: t_hex.slice(<span class="number">0</span>, <span class="number">3</span>) + cp_cy + <span class="string">&quot;E1&quot;</span></span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = ascp;</span><br></pre></td></tr></table></figure><p>可以知道加密参数<code>as</code>,<code>cp</code>的生成代码，直接翻译为python:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> hashlib</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ascp</span>():</span></span><br><span class="line">now = <span class="built_in">int</span>(time.time())</span><br><span class="line">t_hex = <span class="built_in">hex</span>(now).upper()[<span class="number">2</span>:]</span><br><span class="line">md5 = hashlib.md5(<span class="built_in">bytes</span>(<span class="built_in">str</span>(now),<span class="string">&#x27;utf-8&#x27;</span>)).hexdigest().upper()</span><br><span class="line"><span class="keyword">if</span> <span class="built_in">len</span>(t_hex) != <span class="number">8</span>:</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="string">&#x27;as&#x27;</span>: <span class="string">&quot;479BB4B7254C150&quot;</span>,</span><br><span class="line"><span class="string">&#x27;cp&#x27;</span>: <span class="string">&quot;7E0AC8874BB0985&quot;</span></span><br><span class="line">&#125;</span><br><span class="line">pre = md5[:<span class="number">5</span>]</span><br><span class="line">last = md5[-<span class="number">5</span>:]</span><br><span class="line">as_cy = <span class="string">&#x27;&#x27;</span></span><br><span class="line">cp_cy = <span class="string">&#x27;&#x27;</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">as_cy += pre[i]+t_hex[i]</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">5</span>):</span><br><span class="line">cp_cy += t_hex[i+<span class="number">3</span>]+last[i]</span><br><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line"><span class="string">&#x27;as&#x27;</span>:<span class="string">&#x27;A1&#x27;</span>+as_cy+t_hex[-<span class="number">3</span>:],</span><br><span class="line"><span class="string">&#x27;cp&#x27;</span>:t_hex[:<span class="number">3</span>]+cp_cy+<span class="string">&#x27;E1&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>那么请求接口便可以进行完整的构造。</p><h2 id="3-构造请求"><a href="#3-构造请求" class="headerlink" title="3.构造请求"></a>3.构造请求</h2><p>根据抓包获取到的接口路径和请求头部，利用加密参数构造请求：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">load_more_news</span>(<span class="params">max_behot_time=<span class="number">0</span></span>):</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line"><span class="string">:param max_behot_time: 翻页参数，根据返回结果的最后一条新闻的behot_time字段传入进行翻页</span></span><br><span class="line"><span class="string">:return: 新闻数据</span></span><br><span class="line"><span class="string">&#x27;&#x27;&#x27;</span></span><br><span class="line">api = <span class="string">&#x27;https://m.toutiao.com/list/wxapp/?&#x27;</span></span><br><span class="line">ASCP = ascp()</span><br><span class="line">params = &#123;</span><br><span class="line"><span class="string">&#x27;aid&#x27;</span>: <span class="string">&#x27;1162&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;ac&#x27;</span>: <span class="string">&#x27;wap&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;tag&#x27;</span>: <span class="string">&#x27;news_entertainment&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;format&#x27;</span>: <span class="string">&#x27;json_raw&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;count&#x27;</span>: <span class="string">&#x27;20&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;as&#x27;</span>: ASCP[<span class="string">&#x27;as&#x27;</span>],</span><br><span class="line"><span class="string">&#x27;cp&#x27;</span>: ASCP[<span class="string">&#x27;cp&#x27;</span>],</span><br><span class="line"><span class="string">&#x27;enable_stick&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;max_behot_time&#x27;</span>: max_behot_time</span><br><span class="line">&#125;</span><br><span class="line">headers = &#123;</span><br><span class="line"><span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/532.36 (KHTML, like Gecko)&#x27;</span></span><br><span class="line">  <span class="string">&#x27; Chrome/53.0.2785.143 Safari/537.36 MicroMessenger/7.0.9.501 NetType/WIFI&#x27;</span></span><br><span class="line">  <span class="string">&#x27; MiniProgramEnv/Windows WindowsWechat&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;m.toutiao.com&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;X-Traffic-Type&#x27;</span>: <span class="string">&#x27;wxapp&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;content-type&#x27;</span>: <span class="string">&#x27;application/json&#x27;</span>,</span><br><span class="line"><span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://servicewechat.com/wx5bfb6b535af31da3/2/page-frame.html&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">response = requests.get(api,params=params,headers=headers)</span><br><span class="line">data = response.json()</span><br><span class="line"><span class="keyword">return</span> data</span><br></pre></td></tr></table></figure><p>返回结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;return_count&quot;</span>:<span class="number">6</span>,</span><br><span class="line">    <span class="attr">&quot;has_more&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">    <span class="attr">&quot;page_id&quot;</span>:<span class="string">&quot;/news_entertainment/&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;_ck&quot;</span>:&#123;</span><br><span class="line">        <span class="attr">&quot;tt_webid&quot;</span>:<span class="string">&quot;6897190557271131655&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">&quot;html&quot;</span>:<span class="literal">null</span>,</span><br><span class="line">    <span class="attr">&quot;data&quot;</span>:[</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v03004d90000buouprlab27bs3sapf9g&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;media_name&quot;</span>:<span class="string">&quot;幸福21问&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ban_comment&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;《幸福21问》通过明星生活状态和多元化价值观的呈现，让大众对于幸福作出更深层次的思考。旨在指导人们生活，传播积极思想、理念、引导人们合理、正确生活，从而起到沟通社会，传递幸福的作用。&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;video_detail_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;detail_video_large_image&quot;</span>:&#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/tos-cn-i-0004/2fa51da12cb04a738ed88d56fd207045&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">640</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">360</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v03004d90000buouprlab27bs3sapf9g&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;video_watch_count&quot;</span>:<span class="number">2502</span>,</span><br><span class="line">                <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32832</span>,</span><br><span class="line">                <span class="attr">&quot;direct_play&quot;</span>:<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;image_list&quot;</span>:[</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;datetime&quot;</span>:<span class="string">&quot;2020-11-20 20:41&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;article_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;video_variety&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;has_m3u8_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;video_duration&quot;</span>:<span class="number">534</span>,</span><br><span class="line">            <span class="attr">&quot;display_dt&quot;</span>:<span class="number">1605849000</span>,</span><br><span class="line">            <span class="attr">&quot;has_mp4_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;aggr_type&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;cell_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;article_sub_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;bury_count&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;title&quot;</span>:<span class="string">&quot;《幸福21问第一季》第九集刘芸曝幸福秘籍，回应网络暴力&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_icon_style&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;tip&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_video&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;share_url&quot;</span>:<span class="string">&quot;https://m.toutiaoimg.cn/a6895555038950162951/?app=news_article&amp;is_hit_share_recommend=0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source&quot;</span>:<span class="string">&quot;幸福21问&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;comment_count&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;article_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6895555038950162951/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;large_mode&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;large_image_url&quot;</span>:<span class="string">&quot;http://p26-tt.byteimg.com/img/tos-cn-i-0004/2fa51da12cb04a738ed88d56fd207045~tplv-tt-cs0:640:360.jpg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;publish_time&quot;</span>:<span class="number">1605849000</span>,</span><br><span class="line">            <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32833</span>,</span><br><span class="line">            <span class="attr">&quot;action_extra&quot;</span>:<span class="string">&quot;&#123;&quot;</span>channel_id<span class="string">&quot;: 3189398972&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag_id&quot;</span>:<span class="string">&quot;6895555038950162951&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_url&quot;</span>:<span class="string">&quot;/i6895555038950162951/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;display_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6895555038950162951/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_stick&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;item_id&quot;</span>:<span class="string">&quot;6895555038950162951&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;repin_count&quot;</span>:<span class="number">12</span>,</span><br><span class="line">            <span class="attr">&quot;cell_flag&quot;</span>:<span class="number">268697675</span>,</span><br><span class="line">            <span class="attr">&quot;source_open_url&quot;</span>:<span class="string">&quot;sslocal://profile?refer=video&amp;uid=85030278227&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;level&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;digg_count&quot;</span>:<span class="number">58</span>,</span><br><span class="line">            <span class="attr">&quot;behot_time&quot;</span>:<span class="number">1605876119</span>,</span><br><span class="line">            <span class="attr">&quot;hot&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>:<span class="number">1605876119999</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6895555038950162951/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;user_repin&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_image&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;video_style&quot;</span>:<span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;media_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;avatar_url&quot;</span>:<span class="string">&quot;http://p3-tt-ipv6.byteimg.com/img/user-avatar/b71f850307cbb51d126dfc653da6a937~120x256.image&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;media_id&quot;</span>:<span class="number">1642007268816907</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;幸福21问&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user_verified&quot;</span>:<span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group_id&quot;</span>:<span class="string">&quot;6895555038950162951&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;media_name&quot;</span>:<span class="string">&quot;娱乐拆穿姐&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ban_comment&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;昨晚，2020TVB万千星辉贺台庆晚会举行，又是一年TVB台庆，除了像姐这样为了工作而不得不看一眼地，还有多少剧迷会去关注?&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;image_list&quot;</span>:[</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/pgc-image/28df087dbc5546bd80d8366b4dd5fb3d&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">640</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">360</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/pgc-image/f32566e63f8d4f0da76c86e027a1b185&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">880</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">495</span></span><br><span class="line">                &#125;,</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/pgc-image/6a5c16ab994a48d3b6396159003a0d98&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">800</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">450</span></span><br><span class="line">                &#125;</span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;datetime&quot;</span>:<span class="string">&quot;2020-11-20 20:31&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;article_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;more_mode&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;news_entertainment&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;has_m3u8_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;display_dt&quot;</span>:<span class="number">1605837868</span>,</span><br><span class="line">            <span class="attr">&quot;has_mp4_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;aggr_type&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;cell_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;article_sub_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;bury_count&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;title&quot;</span>:<span class="string">&quot;TVB昨晚台庆，但这样的宫心计，怕是看不到了&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_icon_style&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;tip&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_video&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;share_url&quot;</span>:<span class="string">&quot;http://toutiao.com/a6897020166434161163/?app=news_article&amp;is_hit_share_recommend=0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source&quot;</span>:<span class="string">&quot;娱乐拆穿姐&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;comment_count&quot;</span>:<span class="number">18</span>,</span><br><span class="line">            <span class="attr">&quot;article_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6897020166434161163/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;publish_time&quot;</span>:<span class="number">1605837868</span>,</span><br><span class="line">            <span class="attr">&quot;group_flags&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;gallary_image_count&quot;</span>:<span class="number">39</span>,</span><br><span class="line">            <span class="attr">&quot;action_extra&quot;</span>:<span class="string">&quot;&#123;&quot;</span>channel_id<span class="string">&quot;: 3189398972&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag_id&quot;</span>:<span class="string">&quot;6897020166434161163&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_url&quot;</span>:<span class="string">&quot;/i6897020166434161163/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;display_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6897020166434161163/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_stick&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;item_id&quot;</span>:<span class="string">&quot;6897020166434161163&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;repin_count&quot;</span>:<span class="number">74</span>,</span><br><span class="line">            <span class="attr">&quot;cell_flag&quot;</span>:<span class="number">268697611</span>,</span><br><span class="line">            <span class="attr">&quot;source_open_url&quot;</span>:<span class="string">&quot;sslocal://profile?uid=6041444276&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;level&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;digg_count&quot;</span>:<span class="number">190</span>,</span><br><span class="line">            <span class="attr">&quot;behot_time&quot;</span>:<span class="number">1605875519</span>,</span><br><span class="line">            <span class="attr">&quot;hot&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>:<span class="number">1605875519999</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6897020166434161163/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;user_repin&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_image&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;video_style&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;media_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;avatar_url&quot;</span>:<span class="string">&quot;http://p9-tt-ipv6.byteimg.com/large/user-avatar/2799deba7af6df3a237f0d3c88bcab61&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;media_id&quot;</span>:<span class="number">6041583451</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;娱乐拆穿姐&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user_verified&quot;</span>:<span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group_id&quot;</span>:<span class="string">&quot;6897020166434161163&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v030040c0000buqti0fp10vlr7tjrgbg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;media_name&quot;</span>:<span class="string">&quot;经典热综回放&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ban_comment&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;综艺：宋小宝与刘德华比美，观众都快笑岔气了，太逗了！&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;video_detail_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;detail_video_large_image&quot;</span>:&#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/tos-cn-i-0004/7288eed5d6f24ecb93b06a332cbb4d9b&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">640</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">360</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v030040c0000buqti0fp10vlr7tjrgbg&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;video_watch_count&quot;</span>:<span class="number">464072</span>,</span><br><span class="line">                <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32832</span>,</span><br><span class="line">                <span class="attr">&quot;direct_play&quot;</span>:<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;image_list&quot;</span>:[</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;datetime&quot;</span>:<span class="string">&quot;2020-11-20 20:21&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;article_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;video_variety&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;has_m3u8_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;video_duration&quot;</span>:<span class="number">1087</span>,</span><br><span class="line">            <span class="attr">&quot;display_dt&quot;</span>:<span class="number">1605753253</span>,</span><br><span class="line">            <span class="attr">&quot;has_mp4_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;aggr_type&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;cell_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;article_sub_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;bury_count&quot;</span>:<span class="number">5</span>,</span><br><span class="line">            <span class="attr">&quot;title&quot;</span>:<span class="string">&quot;综艺：宋小宝与刘德华比美，观众都快笑岔气了，太逗了！&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_icon_style&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;tip&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_video&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;share_url&quot;</span>:<span class="string">&quot;https://m.toutiaoimg.cn/a6896657707307106830/?app=news_article&amp;is_hit_share_recommend=0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source&quot;</span>:<span class="string">&quot;经典热综回放&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;comment_count&quot;</span>:<span class="number">28</span>,</span><br><span class="line">            <span class="attr">&quot;article_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6896657707307106830/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;large_mode&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;large_image_url&quot;</span>:<span class="string">&quot;http://p3-tt-ipv6.byteimg.com/img/tos-cn-i-0004/7288eed5d6f24ecb93b06a332cbb4d9b~tplv-tt-cs0:640:360.jpg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;publish_time&quot;</span>:<span class="number">1605753253</span>,</span><br><span class="line">            <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32833</span>,</span><br><span class="line">            <span class="attr">&quot;action_extra&quot;</span>:<span class="string">&quot;&#123;&quot;</span>channel_id<span class="string">&quot;: 3189398972&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag_id&quot;</span>:<span class="string">&quot;6896657707307106830&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_url&quot;</span>:<span class="string">&quot;/i6896657707307106830/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;display_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6896657707307106830/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_stick&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;item_id&quot;</span>:<span class="string">&quot;6896657707307106830&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;repin_count&quot;</span>:<span class="number">1630</span>,</span><br><span class="line">            <span class="attr">&quot;cell_flag&quot;</span>:<span class="number">268697675</span>,</span><br><span class="line">            <span class="attr">&quot;source_open_url&quot;</span>:<span class="string">&quot;sslocal://profile?refer=video&amp;uid=100190924891&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;level&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;digg_count&quot;</span>:<span class="number">7818</span>,</span><br><span class="line">            <span class="attr">&quot;behot_time&quot;</span>:<span class="number">1605874919</span>,</span><br><span class="line">            <span class="attr">&quot;hot&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>:<span class="number">1605874919999</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6896657707307106830/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;user_repin&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_image&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;video_style&quot;</span>:<span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;media_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;avatar_url&quot;</span>:<span class="string">&quot;http://p1-tt-ipv6.byteimg.com/large/pgc-image/223001cc8e3b4fa78b9a333a740928c8&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;media_id&quot;</span>:<span class="number">1603333076610062</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;经典热综回放&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user_verified&quot;</span>:<span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group_id&quot;</span>:<span class="string">&quot;6896657707307106830&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v030040e0000bt1od212om8ea8vc37c0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;media_name&quot;</span>:<span class="string">&quot;大咖聊娱&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ban_comment&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;朱之文成名前老婆的样子，再看现在，差距大的就像换了媳妇一样&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;video_detail_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;detail_video_large_image&quot;</span>:&#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/tos-cn-i-0004/4cc259eb42704023b9322b6b70d4e875&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">640</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">360</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v030040e0000bt1od212om8ea8vc37c0&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;video_watch_count&quot;</span>:<span class="number">487712</span>,</span><br><span class="line">                <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32832</span>,</span><br><span class="line">                <span class="attr">&quot;direct_play&quot;</span>:<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;image_list&quot;</span>:[</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;datetime&quot;</span>:<span class="string">&quot;2020-11-20 20:11&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;article_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;video_entertainment&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;has_m3u8_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;video_duration&quot;</span>:<span class="number">268</span>,</span><br><span class="line">            <span class="attr">&quot;display_dt&quot;</span>:<span class="number">1598261570</span>,</span><br><span class="line">            <span class="attr">&quot;has_mp4_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;aggr_type&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;cell_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;article_sub_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;bury_count&quot;</span>:<span class="number">8</span>,</span><br><span class="line">            <span class="attr">&quot;title&quot;</span>:<span class="string">&quot;朱之文成名前老婆的样子，再看现在，差距大的就像换了媳妇一样&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_icon_style&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;tip&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_video&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;share_url&quot;</span>:<span class="string">&quot;https://m.toutiaoimg.cn/a6864481176476877319/?app=news_article&amp;is_hit_share_recommend=0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source&quot;</span>:<span class="string">&quot;大咖聊娱&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;comment_count&quot;</span>:<span class="number">64</span>,</span><br><span class="line">            <span class="attr">&quot;article_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6864481176476877319/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;large_mode&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;large_image_url&quot;</span>:<span class="string">&quot;http://p26-tt.byteimg.com/img/tos-cn-i-0004/4cc259eb42704023b9322b6b70d4e875~tplv-tt-cs0:640:360.jpg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;publish_time&quot;</span>:<span class="number">1598261570</span>,</span><br><span class="line">            <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32833</span>,</span><br><span class="line">            <span class="attr">&quot;action_extra&quot;</span>:<span class="string">&quot;&#123;&quot;</span>channel_id<span class="string">&quot;: 3189398972&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag_id&quot;</span>:<span class="string">&quot;6864481176476877319&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_url&quot;</span>:<span class="string">&quot;/i6864481176476877319/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;display_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6864481176476877319/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_stick&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;item_id&quot;</span>:<span class="string">&quot;6864481176476877319&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;repin_count&quot;</span>:<span class="number">547</span>,</span><br><span class="line">            <span class="attr">&quot;cell_flag&quot;</span>:<span class="number">268697675</span>,</span><br><span class="line">            <span class="attr">&quot;source_open_url&quot;</span>:<span class="string">&quot;sslocal://profile?refer=video&amp;uid=105485989402&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;level&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;digg_count&quot;</span>:<span class="number">3499</span>,</span><br><span class="line">            <span class="attr">&quot;behot_time&quot;</span>:<span class="number">1605874319</span>,</span><br><span class="line">            <span class="attr">&quot;hot&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>:<span class="number">1605874319999</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6864481176476877319/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;user_repin&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_image&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;video_style&quot;</span>:<span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;media_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;avatar_url&quot;</span>:<span class="string">&quot;http://p1-tt-ipv6.byteimg.com/large/pgc-image/a1cd874717af4d97acbd1f8d32ada720&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;media_id&quot;</span>:<span class="number">1665358507201550</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;大咖聊娱&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user_verified&quot;</span>:<span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group_id&quot;</span>:<span class="string">&quot;6864481176476877319&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v03004090000bumf8jj9fmqkhnkdu2k0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;media_name&quot;</span>:<span class="string">&quot;最爱综艺说&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ban_comment&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;非常了得：他是少林十八铜人之一，曾是谢霆锋替身，还上过奥运会&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;video_detail_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;detail_video_large_image&quot;</span>:&#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/tos-cn-i-0004/006b953c84f4433596d13b55fbe95142&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">640</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">360</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v03004090000bumf8jj9fmqkhnkdu2k0&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;video_watch_count&quot;</span>:<span class="number">478605</span>,</span><br><span class="line">                <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32832</span>,</span><br><span class="line">                <span class="attr">&quot;direct_play&quot;</span>:<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;image_list&quot;</span>:[</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;datetime&quot;</span>:<span class="string">&quot;2020-11-20 19:51&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;article_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;video_variety&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;has_m3u8_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;video_duration&quot;</span>:<span class="number">790</span>,</span><br><span class="line">            <span class="attr">&quot;display_dt&quot;</span>:<span class="number">1605170382</span>,</span><br><span class="line">            <span class="attr">&quot;has_mp4_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;aggr_type&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;cell_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;article_sub_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;bury_count&quot;</span>:<span class="number">7</span>,</span><br><span class="line">            <span class="attr">&quot;title&quot;</span>:<span class="string">&quot;非常了得：他是少林十八铜人之一，曾是谢霆锋替身，还上过奥运会&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_icon_style&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;tip&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_video&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;share_url&quot;</span>:<span class="string">&quot;https://m.toutiaoimg.cn/a6894154298528268813/?app=news_article&amp;is_hit_share_recommend=0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source&quot;</span>:<span class="string">&quot;最爱综艺说&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;comment_count&quot;</span>:<span class="number">46</span>,</span><br><span class="line">            <span class="attr">&quot;article_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6894154298528268813/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;large_mode&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;large_image_url&quot;</span>:<span class="string">&quot;http://p26-tt.byteimg.com/img/tos-cn-i-0004/006b953c84f4433596d13b55fbe95142~tplv-tt-cs0:640:360.jpg&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;publish_time&quot;</span>:<span class="number">1605170382</span>,</span><br><span class="line">            <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32833</span>,</span><br><span class="line">            <span class="attr">&quot;action_extra&quot;</span>:<span class="string">&quot;&#123;&quot;</span>channel_id<span class="string">&quot;: 3189398972&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag_id&quot;</span>:<span class="string">&quot;6894154298528268813&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_url&quot;</span>:<span class="string">&quot;/i6894154298528268813/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;display_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6894154298528268813/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_stick&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;item_id&quot;</span>:<span class="string">&quot;6894154298528268813&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;repin_count&quot;</span>:<span class="number">821</span>,</span><br><span class="line">            <span class="attr">&quot;cell_flag&quot;</span>:<span class="number">268697675</span>,</span><br><span class="line">            <span class="attr">&quot;source_open_url&quot;</span>:<span class="string">&quot;sslocal://profile?refer=video&amp;uid=100340306758&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;level&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;digg_count&quot;</span>:<span class="number">4952</span>,</span><br><span class="line">            <span class="attr">&quot;behot_time&quot;</span>:<span class="number">1605873119</span>,</span><br><span class="line">            <span class="attr">&quot;hot&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>:<span class="number">1605873119999</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6894154298528268813/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;user_repin&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_image&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;video_style&quot;</span>:<span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;media_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;avatar_url&quot;</span>:<span class="string">&quot;http://p3-tt-ipv6.byteimg.com/large/906100005d96091bd0a2&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;media_id&quot;</span>:<span class="number">1603333824563207</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;最爱综艺说&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user_verified&quot;</span>:<span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group_id&quot;</span>:<span class="string">&quot;6894154298528268813&quot;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v020043f0000bur6ski8r9gbs2nut8l0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;media_name&quot;</span>:<span class="string">&quot;彪子艾剪辑&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;ban_comment&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;abstract&quot;</span>:<span class="string">&quot;25年前金星有多美？刚做完变性手术接受采访，气质太好了&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;video_detail_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;detail_video_large_image&quot;</span>:&#123;</span><br><span class="line">                    <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/tos-cn-i-0004/3ba395a6e3c840a782706dadddbb91fb&quot;</span>,</span><br><span class="line">                    <span class="attr">&quot;width&quot;</span>:<span class="number">640</span>,</span><br><span class="line">                    <span class="attr">&quot;height&quot;</span>:<span class="number">360</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">&quot;video_id&quot;</span>:<span class="string">&quot;v020043f0000bur6ski8r9gbs2nut8l0&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;video_watch_count&quot;</span>:<span class="number">107779</span>,</span><br><span class="line">                <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32832</span>,</span><br><span class="line">                <span class="attr">&quot;direct_play&quot;</span>:<span class="number">1</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;image_list&quot;</span>:[</span><br><span class="line"></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">&quot;datetime&quot;</span>:<span class="string">&quot;2020-11-20 19:41&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;article_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;tag&quot;</span>:<span class="string">&quot;video_entertainment&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;has_m3u8_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;video_duration&quot;</span>:<span class="number">318</span>,</span><br><span class="line">            <span class="attr">&quot;display_dt&quot;</span>:<span class="number">1605831300</span>,</span><br><span class="line">            <span class="attr">&quot;has_mp4_video&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;aggr_type&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;cell_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;article_sub_type&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;bury_count&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;title&quot;</span>:<span class="string">&quot;25年前金星有多美？刚做完变性手术接受采访，气质太好了&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_icon_style&quot;</span>:<span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;tip&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_video&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;share_url&quot;</span>:<span class="string">&quot;https://m.toutiaoimg.cn/a6896831964473459208/?app=news_article&amp;is_hit_share_recommend=0&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source&quot;</span>:<span class="string">&quot;彪子艾剪辑&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;comment_count&quot;</span>:<span class="number">28</span>,</span><br><span class="line">            <span class="attr">&quot;article_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6896831964473459208/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;publish_time&quot;</span>:<span class="number">1605831300</span>,</span><br><span class="line">            <span class="attr">&quot;group_flags&quot;</span>:<span class="number">32833</span>,</span><br><span class="line">            <span class="attr">&quot;middle_mode&quot;</span>:<span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;action_extra&quot;</span>:<span class="string">&quot;&#123;&quot;</span>channel_id<span class="string">&quot;: 3189398972&#125;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;tag_id&quot;</span>:<span class="string">&quot;6896831964473459208&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;source_url&quot;</span>:<span class="string">&quot;/i6896831964473459208/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;display_url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6896831964473459208/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_stick&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;item_id&quot;</span>:<span class="string">&quot;6896831964473459208&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;repin_count&quot;</span>:<span class="number">188</span>,</span><br><span class="line">            <span class="attr">&quot;cell_flag&quot;</span>:<span class="number">268697675</span>,</span><br><span class="line">            <span class="attr">&quot;source_open_url&quot;</span>:<span class="string">&quot;sslocal://profile?refer=video&amp;uid=2805602832379735&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;level&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;digg_count&quot;</span>:<span class="number">960</span>,</span><br><span class="line">            <span class="attr">&quot;behot_time&quot;</span>:<span class="number">1605872519</span>,</span><br><span class="line">            <span class="attr">&quot;hot&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;cursor&quot;</span>:<span class="number">1605872519999</span>,</span><br><span class="line">            <span class="attr">&quot;url&quot;</span>:<span class="string">&quot;http://toutiao.com/group/6896831964473459208/&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;image_url&quot;</span>:<span class="string">&quot;https://p3.pstatp.com/list/tos-cn-i-0004/3ba395a6e3c840a782706dadddbb91fb&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;user_repin&quot;</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="attr">&quot;has_image&quot;</span>:<span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;video_style&quot;</span>:<span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;media_info&quot;</span>:&#123;</span><br><span class="line">                <span class="attr">&quot;avatar_url&quot;</span>:<span class="string">&quot;http://p26-tt.byteimg.com/large/pgc-image/c2cb832d53a5454d816475664b4420c4&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;media_id&quot;</span>:<span class="number">1669403691802628</span>,</span><br><span class="line">                <span class="attr">&quot;name&quot;</span>:<span class="string">&quot;彪子艾剪辑&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;user_verified&quot;</span>:<span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">&quot;group_id&quot;</span>:<span class="string">&quot;6896831964473459208&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 反编译 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微信小程序 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>关于Python爬虫种类、法律、轮子的一二三</title>
      <link href="2020/11/16/%E5%85%B3%E4%BA%8EPython%E7%88%AC%E8%99%AB%E7%A7%8D%E7%B1%BB%E3%80%81%E6%B3%95%E5%BE%8B%E3%80%81%E8%BD%AE%E5%AD%90%E7%9A%84%E4%B8%80%E4%BA%8C%E4%B8%89/"/>
      <url>2020/11/16/%E5%85%B3%E4%BA%8EPython%E7%88%AC%E8%99%AB%E7%A7%8D%E7%B1%BB%E3%80%81%E6%B3%95%E5%BE%8B%E3%80%81%E8%BD%AE%E5%AD%90%E7%9A%84%E4%B8%80%E4%BA%8C%E4%B8%89/</url>
      
        <content type="html"><![CDATA[<h2 id="Welcome-to-the-D-age"><a href="#Welcome-to-the-D-age" class="headerlink" title="Welcome to the D-age"></a>Welcome to the D-age</h2><p>对于网络上的公开数据，理论上只要由服务端发送到前端都可以由爬虫获取到。但是Data-age时代的到来，数据是新的黄金，毫不夸张的说，数据是未来的一切。基于统计学数学模型的各种人工智能的出现，离不开数据驱动。数据采集、清洗是最末端的技术成本，网络爬虫也是基础采集脚本。但是有几个值得关注的是：</p><ul><li>对于实时变化的网络环境，爬虫的持续有效性如何保证</li><li>数据采集、清洗规则的适用范围</li><li>数据采集的时间与质量–效率</li><li>爬与反爬的恩怨</li><li>爬虫的法律界限</li></ul><a id="more"></a> <h2 id="法律的边界-技术无罪"><a href="#法律的边界-技术无罪" class="headerlink" title="法律的边界,技术无罪"></a>法律的边界,技术无罪</h2><p>对于上面几个关注点，我最先关注的便是爬虫的<strong>法律界限</strong> ，我曾经咨询过一个律师：</p><blockquote><p>Q: 老师，我如果用爬虫爬取今日头条这种类型网站的千万级公开数据，算不算违法呢？<br>A: 爬取的公开数据不得进行非法使用或者商业利用</p></blockquote><p>简单的概括便是爬虫爬取的数据如果进行商业出售或者有获利的使用，便构成了“非法使用”。而一般的爬虫程序并不违法，其实这是从法律专业的一方来解读，如果加上技术层面的维度，那么应该从这几方面考虑：</p><blockquote><ul><li>爬取的数据量</li><li>爬取数据的类型（数据具有巨大的商业价值，未经对方许可，任何人不得非法获取其数据并用于**<em>经营行为**</em>）</li><li>爬取的数据用途 (同行竞争？出售？经营？分析？实验？…)</li><li>是否遵循网站的robots.txt 即 机器人协议</li><li>爬取行为是否会对对方网站造成不能承受的损失（大量的爬取请求会把一个小型网站拖垮）</li></ul></blockquote><p>其实爬虫构成犯罪的案例是开始增多的，相关新闻:</p><blockquote><ol><li><a href="https://www.sohu.com/a/256579233_161795">当爬虫遇上法律会有什么风险？</a></li><li><a href="https://baijiahao.baidu.com/s?id=1609682215455337498&wfr=spider&for=pc">程序员爬虫竟构成犯罪？</a></li><li><a href="https://www.cnblogs.com/nick477931661/p/9139137.html">爬虫相关法律知识</a></li></ol></blockquote><p>如果你的上级或公司要求你爬取某些网站的大量公开数据，你会怎么办呢？可以参考第2条新闻。法律矛盾点关键在于前面考虑的前三点，如果是个人隐私数据，是不能爬取的，如果是非公开数据，是不能爬取的，而对于其他大量的公开数据爬取，看人家查不查的到你，要不要起诉你。技术在你的手上，非法与否在于你怎么去用。最好的爬取道德原则是：</p><blockquote><ul><li>减少并发请求</li><li>延长请求间隔</li><li>不进行公开出售数据</li><li>遵循网站 robots协议</li></ul></blockquote><p>当然，反爬最有效的便(目的均在于拦截爬虫进入网站数据范围)是:</p><blockquote><ul><li>要求用户密码+验证码</li><li>加密数据</li><li>js混淆</li><li>css混淆</li><li>针对IP请求频率封锁</li><li>针对cookie、session单个账户请求频率封锁单日请求次数</li><li>对关键数据进行拆分合并</li><li>对爬虫投毒（返回假数据）</li><li>完善robots.txt</li><li>识别点击九宫图中没有包含xxx的图片等（终极验证码)</li><li>设置黑白名单、IP用户组等</li></ul></blockquote><h2 id="工欲善其事"><a href="#工欲善其事" class="headerlink" title="工欲善其事"></a>工欲善其事</h2><p>针对网站的公开数据进行爬取，我们一般都要先对网站数据进行<strong>分析，定位</strong>，以确定其采集规则，如果网站设置了访问权限，那么便不属于我们的爬虫采集范围了<i class="fa fa-android"></i>:)<br>分析好采集规则，写好了采集数据持久化（存入数据库、导出为word、excel、csv、下载等）的相关代码，整个爬虫运行正常。那么怎样才能提高采集速度呢？</p><blockquote><ul><li>多进程采集</li><li>多线程采集</li><li>异步协程采集</li><li>多进程 + 多线程采集 </li><li>多进程 + 异步协程采集</li><li>分布式采集</li></ul></blockquote><p>异步爬虫是同步爬虫的升级版，在同步爬虫中，无论你怎么优化代码，同步IO的阻塞是最大的致命伤。同步阻塞会让采集任务一个个排着长队领票等待执行。而异步采集不会造成IO阻塞，充分利用了IO阻塞任务的等待时间去执行其他任务。</p><blockquote><p>在IO 模型中，只有IO多路复用（I/O  multiplexing）{在内核处理IO请求结果为可读或可写时调用回调函数} 不阻塞 “内核拷贝IO请求数据到用户空间”这个过程，实现异步IO操作。</p></blockquote><h3 id="同步爬虫"><a href="#同步爬虫" class="headerlink" title="同步爬虫"></a>同步爬虫</h3><p>一般的同步爬虫，我们可以写一个，（以爬取<a href="http://www.quanjing.com/creative/SearchCreative.aspx?id=7">图片网站</a>图片为例），我们来看看其下载该网址所有图片所花费的时间：</p><blockquote><p>以下代码为后面多个例程的共同代码:</p></blockquote><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">import</span> urllib.request <span class="keyword">as</span> request</span><br><span class="line"></span><br><span class="line"><span class="comment">#目标网址</span></span><br><span class="line">url = <span class="string">&#x27;http://www.quanjing.com/creative/SearchCreative.aspx?id=7&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_one_pic</span>(<span class="params">url:<span class="built_in">str</span>,name:<span class="built_in">str</span>,suffix:<span class="built_in">str</span>=<span class="string">&#x27;jpg&#x27;</span></span>):</span></span><br><span class="line"><span class="comment">#下载单张图片</span></span><br><span class="line">    path = <span class="string">&#x27;.&#x27;</span>.join([name,suffix])</span><br><span class="line">    response = request.urlopen(url)</span><br><span class="line">    wb_data = response.read()</span><br><span class="line">    <span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">        f.write(wb_data)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">download_many_pic</span>(<span class="params">urls:<span class="built_in">list</span></span>):</span></span><br><span class="line"><span class="comment">#下载多张图片</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> urls:</span><br><span class="line">        ts = <span class="built_in">str</span>(<span class="built_in">int</span>(time.time() * <span class="number">1000</span>))</span><br><span class="line">        download_one_pic(i, ts)</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(<span class="string">u&#x27;下载完成,%d张图片,耗时:%.2fs&#x27;</span> % (<span class="built_in">len</span>(urls), (end - start)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_pic_urls</span>(<span class="params">url:<span class="built_in">str</span></span>)-&gt;list:</span></span><br><span class="line"><span class="comment">#获取页面所有图片链接</span></span><br><span class="line">    response = request.urlopen(url)</span><br><span class="line">    wb_data = response.read()</span><br><span class="line">    html = etree.HTML(wb_data)</span><br><span class="line">    pic_urls = html.xpath(<span class="string">&#x27;//a[@class=&quot;item lazy&quot;]/img/@src&#x27;</span>)</span><br><span class="line">    <span class="keyword">return</span> pic_urls</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">allot</span>(<span class="params">pic_urls:<span class="built_in">list</span>,n:<span class="built_in">int</span></span>)-&gt;list:</span></span><br><span class="line">    <span class="comment">#根据给定的组数，分配url给每一组</span></span><br><span class="line">    _len = <span class="built_in">len</span>(pic_urls)</span><br><span class="line">    base = <span class="built_in">int</span>(_len / n)</span><br><span class="line">    remainder = _len % n</span><br><span class="line">    groups = [pic_urls[i * base:(i + <span class="number">1</span>) * base] <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(n)]</span><br><span class="line">    remaind_group = pic_urls[n * base:]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(remainder):</span><br><span class="line">        groups[i].append(remaind_group[i])</span><br><span class="line">    <span class="keyword">return</span> [i <span class="keyword">for</span> i <span class="keyword">in</span> groups <span class="keyword">if</span> i]</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>同步爬虫:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">crawler</span>():</span></span><br><span class="line"><span class="comment">#同步下载</span></span><br><span class="line">    pic_urls = get_pic_urls(url)</span><br><span class="line">    download_many_pic(pic_urls)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行同步爬虫，</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crawler()</span><br></pre></td></tr></table></figure><p>输出（时间可能不一样，取决于你的网速）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">下载完成,<span class="number">196</span>张图片,耗时:<span class="number">49.04</span>s</span><br></pre></td></tr></table></figure><p>在同一个网络环境下，排除网速时好时坏，可以下载多几次取平均下载时间，在我的网络环境下，我下载了5次，平均耗时约55.26s</p><h3 id="多进程爬虫"><a href="#多进程爬虫" class="headerlink" title="多进程爬虫"></a>多进程爬虫</h3><p>所以为了提高采集速度，我们可以写一个多进程爬虫（以爬取<a href="http://www.quanjing.com/creative/SearchCreative.aspx?id=7">图片网站</a>图片为例）:<br>为了对应多进程的进程数n，我们可以将图片链接列表分成n组，多进程爬虫:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> multiprocessing.pool <span class="keyword">import</span> Pool</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiprocess_crawler</span>(<span class="params">processors:<span class="built_in">int</span></span>):</span></span><br><span class="line">    <span class="comment">#多进程爬虫</span></span><br><span class="line">    pool = Pool(processors)</span><br><span class="line">    pic_urls = get_pic_src(url)</span><br><span class="line">    <span class="comment">#对应多进程的进程数processors，我们可以将图片链接列表分成processors组</span></span><br><span class="line">    url_groups = allot(pic_urls,processors)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> url_groups:</span><br><span class="line">        pool.apply_async(func=download_many_pic,args=(i,))</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行爬虫,进程数设为4，一般是cpu数量：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">multiprocess_crawler(<span class="number">4</span>)</span><br></pre></td></tr></table></figure><p>输出:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">18.22</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">18.99</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">18.97</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">19.51</span>s</span><br></pre></td></tr></table></figure><p>可以看出，多进程比原先的同步爬虫快许多，整个程序耗时19.51s，为什么不是同步爬虫的55s/4 ≈ 14s呢？因为进程间的切换需要耗时。<br>如果把进程数增大，那么:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">进程数:<span class="number">10</span> , 耗时：<span class="number">12.3</span>s</span><br><span class="line">进程数:<span class="number">30</span> , 耗时：<span class="number">2.81</span>s</span><br><span class="line">进程数:<span class="number">40</span> , 耗时：<span class="number">11.34</span>s</span><br></pre></td></tr></table></figure><p>对于多进程爬虫来说，虽然实现异步爬取，但也不是越多进程越好，进程间切换的开销不仅会让你崩溃，有时还会让你的程序崩溃。一般用进程池Pool维护，Pool的processors设为CPU数量。进程的数量设置超过100个便让我的程序崩溃退出。使用进程池可以保证当前在跑的进程数量控制为设置的数量，只有池子没满才能加新的进程进去。</p><h3 id="多线程爬虫"><a href="#多线程爬虫" class="headerlink" title="多线程爬虫"></a>多线程爬虫</h3><p>多线程版本可以在单进程下进行异步采集，但线程间的切换开销也会随着线程数的增大而增大。当线程间需要共享变量内存时，此时会有许多不可预知的变量读写操作发生，python为了使线程同步，给每个线程共享变量加了全局解释器锁GIL。而我们的爬虫不需要共享变量，因此是线程安全的，不用加锁。多线程版本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> random</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">run_multithread_crawler</span>(<span class="params">pic_urls:<span class="built_in">list</span>,threads:<span class="built_in">int</span></span>):</span></span><br><span class="line">    begin = <span class="number">0</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">        _threads = []</span><br><span class="line">        urls = pic_urls[begin:begin+threads]</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> urls:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> urls:</span><br><span class="line">            ts = <span class="built_in">str</span>(<span class="built_in">int</span>(time.time()*<span class="number">10000</span>))+<span class="built_in">str</span>(random.randint(<span class="number">1</span>,<span class="number">100000</span>))</span><br><span class="line">            t = Thread(target=download_one_pic,args=(i,ts))</span><br><span class="line">            _threads.append(t)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> _threads:</span><br><span class="line">            t.setDaemon(<span class="literal">True</span>)</span><br><span class="line">            t.start()</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> _threads:</span><br><span class="line">            t.join()</span><br><span class="line">        begin += threads</span><br><span class="line">    end = time.time()</span><br><span class="line">    print(<span class="string">u&#x27;下载完成,%d张图片,耗时:%.2fs&#x27;</span> % (<span class="built_in">len</span>(pic_urls), (end - start)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multithread_crawler</span>(<span class="params">threads:<span class="built_in">int</span></span>):</span></span><br><span class="line">    pic_urls = get_pic_src(url)</span><br><span class="line">    run_multithread_crawler(pic_urls,threads)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>并发线程数太多会让我们的系统开销越大，使程序花费时间越长，同时也会增大目标网站识别爬虫机器行为的几率。因此设置好一个适当的线程数以及爬取间隔是良好的爬虫习惯。<br>执行多线程爬虫，设置线程数为50</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">multithreads_crawler(<span class="number">50</span>)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">下载完成,<span class="number">196</span>张图片,耗时:<span class="number">3.10</span>s</span><br></pre></td></tr></table></figure><p>增大线程数，输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">线程数:<span class="number">50</span>,耗时:<span class="number">3.10</span>s</span><br><span class="line">线程数:<span class="number">60</span>,耗时:<span class="number">3.07</span>s</span><br><span class="line">线程数:<span class="number">70</span>,耗时:<span class="number">2.50</span>s</span><br><span class="line">线程数:<span class="number">80</span>,耗时:<span class="number">2.31</span>s</span><br><span class="line">线程数:<span class="number">120</span>,耗时:<span class="number">3.67</span>s</span><br></pre></td></tr></table></figure><p>可以看到，线程可以有效的提高爬取效率，缩短爬取时间，但必须是一个合理的线程数，越多有时并不是越好的，一般是几十到几百个之间，数值比多进程进程数大许多。</p><h3 id="异步协程爬虫"><a href="#异步协程爬虫" class="headerlink" title="异步协程爬虫"></a>异步协程爬虫</h3><p>Python3.5引入了async/await 异步协程语法。详见<a href="https://www.python.org/dev/peps/pep-0492/">PEP492</a><br>由于asyncio提供了基于socket的异步I/O，支持TCP和UDP协议，但是不支持应用层协议HTTP，所以需要安装异步http请求的aiohttp模块<br>单进程下的异步协程爬虫：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> asyncio</span><br><span class="line"><span class="keyword">from</span> asyncio <span class="keyword">import</span> Semaphore</span><br><span class="line"><span class="keyword">from</span> aiohttp <span class="keyword">import</span> ClientSession,TCPConnector</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">download</span>(<span class="params">session:ClientSession,url:<span class="built_in">str</span>,name:<span class="built_in">str</span>,sem:Semaphore,suffix:<span class="built_in">str</span>=<span class="string">&#x27;jpg&#x27;</span></span>):</span></span><br><span class="line">    path = <span class="string">&#x27;.&#x27;</span>.join([name,suffix])</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> sem:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url) <span class="keyword">as</span> response:</span><br><span class="line">            wb_data = <span class="keyword">await</span> response.read()</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(path,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                f.write(wb_data)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">run_coroutine_crawler</span>(<span class="params">pic_urls:<span class="built_in">list</span>,concurrency:<span class="built_in">int</span></span>):</span></span><br><span class="line">    <span class="comment"># 异步协程爬虫,最大并发请求数concurrency</span></span><br><span class="line">    tasks = []</span><br><span class="line">    sem = Semaphore(concurrency)</span><br><span class="line">    conn =TCPConnector(limit=concurrency)</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> ClientSession(connector=conn) <span class="keyword">as</span> session:</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> pic_urls:</span><br><span class="line">            ts = <span class="built_in">str</span>(<span class="built_in">int</span>(time.time() * <span class="number">10000</span>)) + <span class="built_in">str</span>(random.randint(<span class="number">1</span>, <span class="number">100000</span>))</span><br><span class="line">            tasks.append(asyncio.create_task(download(session,i,ts,sem)))</span><br><span class="line">        start = time.time()</span><br><span class="line">        <span class="keyword">await</span> asyncio.gather(*tasks)</span><br><span class="line">        end = time.time()</span><br><span class="line">    print(<span class="string">u&#x27;下载完成,%d张图片,耗时:%.2fs&#x27;</span> % (<span class="built_in">len</span>(pic_urls), (end - start)))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">coroutine_crawler</span>(<span class="params">concurrency:<span class="built_in">int</span></span>):</span></span><br><span class="line">    pic_urls = get_pic_src(url)</span><br><span class="line">    loop = asyncio.get_event_loop()</span><br><span class="line">    loop.run_until_complete(run_coroutine_crawler(pic_urls,concurrency))</span><br><span class="line">    loop.close()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>执行异步协程爬虫，设置最大并发请求数为100：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">coroutine_crawler(<span class="number">100</span>)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">下载完成,<span class="number">196</span>张图片,耗时:<span class="number">2.27</span>s</span><br></pre></td></tr></table></figure><p>可以看出，异步多协程的下载请求效率并不比多线程差，由于磁盘IO读写阻塞，所以还可以进一步优化，使用<a href="https://pypi.org/project/aiofiles/0.2.1/">aiofiles</a>。<br>针对比较大的多媒体数据下载，异步磁盘IO可以使用aiofiles,以上述例子download可以改为:</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> aiofiles</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">download</span>(<span class="params">session:ClientSession,url:<span class="built_in">str</span>,name:<span class="built_in">str</span>,sem:Semaphore,suffix:<span class="built_in">str</span>=<span class="string">&#x27;jpg&#x27;</span></span>):</span></span><br><span class="line">    path = <span class="string">&#x27;.&#x27;</span>.join([name,suffix])</span><br><span class="line">    <span class="keyword">async</span> <span class="keyword">with</span> sem:</span><br><span class="line">        <span class="keyword">async</span> <span class="keyword">with</span> session.get(url) <span class="keyword">as</span> response:</span><br><span class="line">           <span class="keyword">async</span> <span class="keyword">with</span> aiofiles.<span class="built_in">open</span>(path,<span class="string">&#x27;wb&#x27;</span>) <span class="keyword">as</span> fd:</span><br><span class="line">            <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">                wb_data_chunk = <span class="keyword">await</span> response.content.read(<span class="number">1024</span>)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> wb_data_chunk:</span><br><span class="line">                    <span class="keyword">break</span></span><br><span class="line">                <span class="keyword">await</span> fd.write(wb_data_chunk)</span><br></pre></td></tr></table></figure><h3 id="多进程-多线程-爬虫"><a href="#多进程-多线程-爬虫" class="headerlink" title="多进程 + 多线程 爬虫"></a>多进程 + 多线程 爬虫</h3><p>实际采集大量数据的过程中，往往是多种手段来实现爬虫，这样可以充分利用机器CPU，节省采集时间。<br>下面使用多进程（进程数为CPU数，4）+ 多线程 （线程数设为50）来对例子进行更改(上面各个例子导入的模块默认使用):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mixed_process_thread_crawler</span>(<span class="params">processors:<span class="built_in">int</span>,threads:<span class="built_in">int</span></span>):</span></span><br><span class="line">    pool = Pool(processors)</span><br><span class="line">    pic_urls = get_pic_src(url)</span><br><span class="line">    url_groups = allot(pic_urls,processors)</span><br><span class="line">    <span class="keyword">for</span> group <span class="keyword">in</span> url_groups:</span><br><span class="line">        pool.apply_async(run_multithread_crawler,args=(group,threads))</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br></pre></td></tr></table></figure><p>执行爬虫：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mixed_process_thread_crawler(<span class="number">4</span>,<span class="number">50</span>)</span><br></pre></td></tr></table></figure><p>输出： </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.73</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.76</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.76</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.76</span>s</span><br></pre></td></tr></table></figure><p>采集时间与异步协程和多线程并无多大的差异，可以使用更大数据量做实验区分。因为多进程+多线程，CPU切换上下文也会造成一定的开销，所以进程数与线程数不能太大，并发请求的时间间隔也要考虑进去。</p><h3 id="多进程-异步协程-爬虫"><a href="#多进程-异步协程-爬虫" class="headerlink" title="多进程 + 异步协程 爬虫"></a>多进程 + 异步协程 爬虫</h3><p>使用多进程（进程数为CPU数，4）+ 异步协程（最大并发请求数设为50）来对例子进行更改(上面各个例子导入的模块默认使用):</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_coroutine_crawler</span>(<span class="params">pic_urls:<span class="built_in">list</span>,concurrency:<span class="built_in">int</span></span>):</span></span><br><span class="line">    loop = asyncio.get_event_loop()</span><br><span class="line">    loop.run_until_complete(run_coroutine_crawler(pic_urls, concurrency))</span><br><span class="line">    loop.close()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">mixed_process_coroutine_crawler</span>(<span class="params">processors:<span class="built_in">int</span>,concurrency:<span class="built_in">int</span></span>):</span></span><br><span class="line">    pool = Pool(processors)</span><br><span class="line">    pic_urls = get_pic_src(url)</span><br><span class="line">    url_groups = allot(pic_urls, processors)</span><br><span class="line">    <span class="keyword">for</span> group <span class="keyword">in</span> url_groups:</span><br><span class="line">        pool.apply_async(_coroutine_crawler, args=(group, concurrency))</span><br><span class="line">    pool.close()</span><br><span class="line">    pool.join()</span><br></pre></td></tr></table></figure><p>执行爬虫 ：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mixed_process_coroutine_crawler(<span class="number">4</span>,<span class="number">50</span>)</span><br></pre></td></tr></table></figure><p>输出： </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.56</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.54</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.56</span>s</span><br><span class="line">下载完成,<span class="number">49</span>张图片,耗时:<span class="number">2.62</span>s</span><br></pre></td></tr></table></figure><p>效果与多进程 + 多线程 爬虫差不多，但是CPU减少了切换线程上下文的开销，而是对每一个协程任务进行监视回调唤醒。使用IO多路复用的底层原理实现。</p><h3 id="分布式采集"><a href="#分布式采集" class="headerlink" title="分布式采集"></a>分布式采集</h3><p>关于分布式采集将会单独写一章，使用Map-Reduce+redis来实现分布式爬虫。</p><h2 id="轮子们，你们辛苦了"><a href="#轮子们，你们辛苦了" class="headerlink" title="轮子们，你们辛苦了"></a>轮子们，你们辛苦了</h2><p>现实生活中的爬虫不止上面那些，但是基本的骨架是一样的，对于特定的网站需要制定特定的采集规则，所以通用的数据采集爬虫很难实现。所以针对某个网站的数据采集爬虫是需要定制的，但是在不同之中包含着许多的相同、重复性的过程，比如说采集流程，或者对请求头部的伪造，数据持久化的处理等，采集框架应运而生。Scrapy就是目前比较成熟的一个爬虫框架。它可以帮助我们大大减少重复性的代码编写，可以更好的组织采集流程。而我们只需要喝一杯咖啡，编写自己的采集规则，让Scrapy去给我们管理各种各样的爬虫，做些累活。如果你是一个爬虫爱好者，那么scrapy是你的不错选择。由于好奇scrapy的实现流程，所以我才开始打开他的源码学习。<br>有些人觉得scrapy太重，他的爬虫只需要简单的采集，自己写一下就可以搞定了。但如果是大量的爬虫采集呢？怎么去管理这些爬虫呢？怎样才能提高采集效率呀？<br>Scrapy helps！！</p><p>另外还有另一个Python采集框架：pyspider。国人编写的，cool<br>感谢轮子们的父母，还有那些辛苦工作的轮子们，你们辛苦了</p>]]></content>
      
      
      <categories>
          
          <category> 爬虫 </category>
          
          <category> python3 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> python爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
